<!DOCTYPE html>
<html>
<!-- NO_CLICK_TRACKING -->

<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />

<style type="text/css">.koka .plaincode, .koka a.pp .pc { display: none; } .koka a.pp { color: inherit; text-decoration: none; }</style>
<link rel="stylesheet" type="text/css" href="styles/madoko.css" />
<link rel="stylesheet" type="text/css" href="styles/koka.css" />

<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Noto+Serif:400,400italic,700,700italic" />
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700,400italic" />

<title>double.kk documentation</title>
</head>

<body class="koka doc body"><div class="madoko">
<pre class="koka source"><span class="comment">/&#42;---------------------------------------------------------------------------
  Copyright 2017 Microsoft Corporation.
 
  This is free software; you can redistribute it and/or modify it under the
  terms of the Apache License, Version 2.0. A copy of the License can be
  found in the file "license.txt" at the root of this distribution.
---------------------------------------------------------------------------&#42;/</span>

<span class="comment">/&#42; Various operations on a 64-bit IEEE &#96;:double&#96;.

&#42;/</span>
<span class="kw">public</span> <span class="kw">module</span> double


<span class="comment">//-----------------------------------------
// Constants
//-----------------------------------------
</span>

<span class="comment">// &amp;pi;
</span><span class="decl-val" id="pi"><span class="kw">val</span> <a class="pp" href="std_num_double.html#pi">pi<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>pi: <span class="tp">double</span></span></a>          <span class="kw">=</span> <span class="number">3.141592653589793238462643383279502884</span></span>
<span class="decl-val" id="dbl_pi"><span class="kw">val</span> <a class="pp" href="std_num_double.html#dbl_pi">dbl-pi<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>dbl<span class="dash">-</span>pi: <span class="tp">double</span></span></a>      <span class="kw">=</span> <a class="pp" href="#pi">pi<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>pi: <span class="tp">double</span></span></a></span>

<span class="comment">// 2&amp;pi;
</span><span class="decl-val" id="dbl_twopi"><span class="kw">val</span> <a class="pp" href="std_num_double.html#dbl_twopi">dbl-twopi<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>dbl<span class="dash">-</span>twopi: <span class="tp">double</span></span></a>   <span class="kw">=</span> <span class="number">6.283185307179586476925286766559005768</span></span>

<span class="comment">// &amp;pi;/2
</span><span class="decl-val" id="dbl_pi2"><span class="kw">val</span> <a class="pp" href="std_num_double.html#dbl_pi2">dbl-pi2<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>dbl<span class="dash">-</span>pi2: <span class="tp">double</span></span></a>     <span class="kw">=</span> <span class="number">1.570796326794896619231321691639751442</span></span>

<span class="comment">// The [&#95;e&#95;](https://en.wikipedia.org/wiki/E&#95;(mathematical&#95;constant)) constant.
</span><span class="decl-val" id="dbl_e"><span class="kw">val</span> <a class="pp" href="std_num_double.html#dbl_e">dbl-e<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>dbl<span class="dash">-</span>e: <span class="tp">double</span></span></a>       <span class="kw">=</span> <span class="number">2.718281828459045235360287471352662498</span></span>

<span class="comment">// The natural logarithm of 2
</span><span class="decl-val" id="dbl_log2"><span class="kw">val</span> <a class="pp" href="std_num_double.html#dbl_log2">dbl-log2<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>dbl<span class="dash">-</span>log2: <span class="tp">double</span></span></a>    <span class="kw">=</span> <span class="number">0.693147180559945309417232121458176568</span></span>

<span class="comment">// The natural logarithm of 10
</span><span class="decl-val" id="dbl_log10"><span class="kw">val</span> <a class="pp" href="std_num_double.html#dbl_log10">dbl-log10<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>dbl<span class="dash">-</span>log10: <span class="tp">double</span></span></a>   <span class="kw">=</span> <span class="number">2.302585092994045684017991454684364208</span></span>

<span class="comment">// The base-2 logarithm of &#95;e&#95;.
</span><span class="decl-val" id="dbl_log2e"><span class="kw">val</span> <a class="pp" href="std_num_double.html#dbl_log2e">dbl-log2e<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>dbl<span class="dash">-</span>log2e: <span class="tp">double</span></span></a>   <span class="kw">=</span>  <span class="number">1.442695040888963407359924681001892137</span></span>

<span class="comment">// The base-10 logarithm of &#95;e&#95;.
</span><span class="decl-val" id="dbl_log10e"><span class="kw">val</span> <a class="pp" href="std_num_double.html#dbl_log10e">dbl-log10e<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>dbl<span class="dash">-</span>log10e: <span class="tp">double</span></span></a>  <span class="kw">=</span> <span class="number">0.434294481903251827651128918916605082</span></span>

<span class="comment">// The square-root of 2
</span><span class="decl-val" id="dbl_sqrt2"><span class="kw">val</span> <a class="pp" href="std_num_double.html#dbl_sqrt2">dbl-sqrt2<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>dbl<span class="dash">-</span>sqrt2: <span class="tp">double</span></span></a>   <span class="kw">=</span> <span class="number">1.414213562373095048801688724209698079</span></span>

<span class="comment">// &#96;1.0 / sqrt(2.0)&#96;
</span><span class="decl-val" id="dbld_sqrt12"><span class="kw">val</span> <a class="pp" href="std_num_double.html#dbld_sqrt12">dbld-sqrt12<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>dbld<span class="dash">-</span>sqrt12: <span class="tp">double</span></span></a> <span class="kw">=</span> <span class="number">0.707106781186547524400844362104849039</span></span>

<span class="comment">// [Euler's constant](https://en.wikipedia.org/wiki/Euler%E2%80%93Mascheroni&#95;constant)
</span><span class="decl-val" id="dbl_euler"><span class="kw">val</span> <a class="pp" href="std_num_double.html#dbl_euler">dbl-euler<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>dbl<span class="dash">-</span>euler: <span class="tp">double</span></span></a>   <span class="kw">=</span> <span class="number">0.577215664901532860606512090082402431</span></span>

<span class="comment">// Maximum double value
</span><span class="decl-val" id="dbl_max"><span class="kw">val</span> <a class="pp" href="std_num_double.html#dbl_max">dbl-max<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>dbl<span class="dash">-</span>max: <span class="tp">double</span></span></a>     <span class="kw">=</span> <span class="number">1.79769313486231570815e+308</span></span>
                  
<span class="comment">// Smallest positive normalized double value
</span><span class="decl-val" id="dbl_min"><span class="kw">val</span> <a class="pp" href="std_num_double.html#dbl_min">dbl-min<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>dbl<span class="dash">-</span>min: <span class="tp">double</span></span></a>     <span class="kw">=</span> <span class="number">2.22507385850720138309e-308</span></span>

<span class="comment">// Smallest positive denormalized value (i.e. &#96;&#96;DBL&#95;TRUE&#95;MIN&#96;&#96;)
</span><span class="decl-val" id="dbl_true_min"><span class="kw">val</span> <a class="pp" href="std_num_double.html#dbl_true_min">dbl-true-min<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>dbl<span class="dash">-</span>true<span class="dash">-</span>min: <span class="tp">double</span></span></a><span class="kw">=</span> <span class="number">4.9406564584124654418e-324</span></span>

<span class="comment">// Machine epsilon: the difference between 1.0 and the next representable &#96;:double&#96; value.
</span><span class="decl-val" id="dbl_epsilon"><span class="kw">val</span> <a class="pp" href="std_num_double.html#dbl_epsilon">dbl-epsilon<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>dbl<span class="dash">-</span>epsilon: <span class="tp">double</span></span></a> <span class="kw">=</span> <span class="number">2.2204460492503130808e-16</span></span>

<span class="comment">// maximal precision in decimal digits of a &#96;:double&#96;.
</span><span class="decl-val" id="dbl_max_prec"><span class="kw">val</span> <a class="pp" href="std_num_double.html#dbl_max_prec">dbl-max-prec<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>dbl<span class="dash">-</span>max<span class="dash">-</span>prec: <span class="tp">int</span></span></a><span class="kw">=</span> <span class="number">15</span></span>

<span class="comment">// Represents a value that is &#95;not a number&#95; (NaN)
</span><span class="decl-val" id="nan"><span class="kw">val</span> <a class="pp" href="std_num_double.html#nan">nan<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>nan: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a>    <span class="kw">=</span> <span class="number">0.0</span><a class="pp" href="std_core-source.html#_fs__1">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><span class="number">0.0</span></span>

<span class="comment">// Positive infinity
</span><span class="decl-val" id="posinf"><span class="kw">val</span> <a class="pp" href="std_num_double.html#posinf">posinf<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>posinf: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="number">1.0</span><a class="pp" href="std_core-source.html#_fs__1">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><span class="number">0.0</span></span>

<span class="comment">// Negative infinity
</span><span class="decl-val" id="neginf"><span class="kw">val</span> <a class="pp" href="std_num_double.html#neginf">neginf<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>neginf: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="number">-1.0</span><a class="pp" href="std_core-source.html#_fs__1">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><span class="number">0.0</span></span>


<span class="comment">//-----------------------------------------
// NaN, Infinity
//-----------------------------------------
</span>
<span class="comment">// Is this value equal to NaN ?
</span><span class="decl-external" id="nan_ques_"><span class="kw">extern</span> inline <a class="pp" href="std_num_double.html#nan_ques_">nan?<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>nan?: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <span class="tp sp">(</span><a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a><span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> {
  cs <span class="st">"double.IsNaN"</span>
  js <span class="st">"isNaN"</span>
</span>} 

<span class="comment">// Is this value equal to negative or positive infinity ?
</span><span class="decl-fun" id="inf_ques_"><span class="kw">extern</span> <a class="pp" href="std_num_double.html#inf_ques_">inf?<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>inf?: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <span class="tp sp">(</span><a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a><span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> {
  cs <span class="st">"double.IsInfinity"</span>
  js inline <span class="st">"((#1) === Infinity || (#1) === -Infinity)"</span>
</span>}

<span class="comment">// Is this value equal to positive infinity ?
</span><span class="decl-external" id="posinf_ques_"><span class="kw">extern</span> inline <a class="pp" href="std_num_double.html#posinf_ques_">posinf?<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>posinf?: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <span class="tp sp">(</span><a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a><span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> {
  cs <span class="st">"double.IsPositiveInfinity"</span>
  js inline <span class="st">"((#1) === Infinity)"</span>
</span>}

<span class="comment">// Is this value equal to negative infinity ?
</span><span class="decl-external" id="neginf_ques_"><span class="kw">extern</span> inline <a class="pp" href="std_num_double.html#neginf_ques_">neginf?<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>neginf?: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <span class="tp sp">(</span><a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a><span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> {
  cs <span class="st">"double.IsNegativeInfinity"</span>
  js inline <span class="st">"((#1) === -Infinity)"</span>
</span>}

<span class="comment">// Is this a finite number (i.e. not &#96;nan&#96; or infinity)
</span><span class="decl-external" id="finite_ques_"><span class="kw">extern</span> inline <a class="pp" href="std_num_double.html#finite_ques_">finite?<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>finite?: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( d <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> {
  cs inline <span class="st">"(!double.isNaN(#1) &amp;&amp; !double.IsInfinity(#1))"</span>
  js <span class="st">"isFinite"</span>
</span>}

<span class="comment">//-----------------------------------------
// Rounding
//-----------------------------------------
</span>

<span class="comment">// Round a double to its nearest integral value.
// If the value is halfway between two integers, the value is rounded to the even one.
</span><span class="decl-fun" id="round"><span class="kw">extern</span> <a class="pp" href="std_num_double.html#round">round<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>round: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tpp">d</span><span class="tp kw op">:</span><a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a><span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  cs <span class="st">"Math.Round"</span>
  js <span class="st">"Math.round"</span>
</span>}

<span class="comment">// Return the largest integer equal or less than &#96;d&#96; 
</span><span class="decl-external" id="floor"><span class="kw">extern</span> inline <a class="pp" href="std_num_double.html#floor">floor<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>floor: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tpp">d</span><span class="tp kw op">:</span><a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a><span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  cs <span class="st">"Math.Floor"</span>
  js <span class="st">"Math.floor"</span>
</span>}

<span class="comment">// Return the smallest integer equal or larger than &#96;d&#96; 
</span><span class="decl-external" id="ceiling"><span class="kw">extern</span> inline <a class="pp" href="std_num_double.html#ceiling">ceiling<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>ceiling: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tpp">d</span><span class="tp kw op">:</span><a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a><span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  cs <span class="st">"Math.Ceiling"</span>
  js <span class="st">"Math.ceil"</span>
</span>}

<span class="comment">// Return the integral part of a &#96;:double&#96; &#96;d&#96; .
// If &#96;d &gt;= 0.0&#96; , return the largest integer equal or less to &#96;d&#96; ,
// If &#96;d &lt; 0.0&#96; , return the smallest integer equal or larger to &#96;d&#96; .
</span><span class="decl-fun" id="trunc"><span class="kw">fun</span> <a class="pp" href="std_num_double.html#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">d<span class="pc">d: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">d</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_gt__eq__2">&gt;=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&gt;=)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="number">0.0</span>) <span class="kw">then</span> <a class="pp" href="#floor">floor<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>floor: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">d<span class="pc">d: <span class="tp">double</span></span></a>) <span class="kw">else</span> <a class="pp" href="#ceiling">ceiling<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>ceiling: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">d<span class="pc">d: <span class="tp">double</span></span></a>)
</span>}

<span class="comment">// Return the fractional part of a &#96;:double&#96; &#96;d&#96;.\
// &#96;d.trunc + d.fraction === d&#96;\
// &#96;(-2.4).fraction === -0.4&#96;
</span><span class="decl-fun" id="fraction"><span class="kw">fun</span> <a class="pp" href="std_num_double.html#fraction">fraction<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>fraction: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">d<span class="pc">d: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <a class="pp">d<span class="pc">d: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_dash__2">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">d<span class="pc">d: <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>
</span>}

<span class="comment">// Return the 'floored' fraction of &#96;d&#96;, always greater or equal to zero.\
// &#96;d.floor + d.ffraction === d&#96;\
// &#96;(-2.4).ffraction === 0.6&#96;
</span><span class="decl-fun" id="ffraction"><span class="kw">fun</span> <a class="pp" href="std_num_double.html#ffraction">ffraction<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>ffraction: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">d<span class="pc">d: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <a class="pp">d<span class="pc">d: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_dash__2">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">d<span class="pc">d: <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="#floor">floor<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>floor: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>
</span>}


<span class="comment">// Round a double to a specified precision.\
// &#96;123.456.round-to-prec(2) == 123.46&#96;\
// &#96;123.456.round-to-prec(-1) == 120.0&#96;\
</span><span class="decl-fun" id="round_to_prec"><span class="kw">fun</span> <a class="pp" href="std_num_double.html#round_to_prec">round-to-prec<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>round<span class="dash">-</span>to<span class="dash">-</span>prec: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">d<span class="pc">d: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a>, <a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a>  ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">prec</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_lt__eq__1">&lt;=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&lt;=)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="number">0</span>) <span class="kw">then</span> <a class="pp">d<span class="pc">d: <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="#round">round<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>round: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <span class="kw">else</span> {
    <span class="kw">val</span> <a class="pp">p<span class="pc">p: <span class="tp">double</span></span></a>  <span class="kw">=</span> <a class="pp" href="#exp10">exp10<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>exp10: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>)
    (<a class="pp">d<span class="pc">d: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">p<span class="pc">p: <span class="tp">double</span></span></a>)<span class="kw op">.</span><a class="pp" href="#round">round<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>round: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_fs__1">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">p<span class="pc">p: <span class="tp">double</span></span></a>
  }
</span>}


<span class="comment">//-----------------------------------------
// Powers
//-----------------------------------------
</span>
<span class="comment">// Return the square root of a value &#96;d&#96; 
// Returns &#96;nan&#96; if &#96;d == nan&#96;  or if &#96;d&#96;  is negative.
// Returns &#96;inf&#96; if &#96;d == inf&#96; .
</span><span class="decl-external" id="sqrt"><span class="kw">extern</span> inline <a class="pp" href="std_num_double.html#sqrt">sqrt<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>sqrt: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tpp">d</span><span class="tp kw op">:</span><a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a><span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  cs <span class="st">"Math.Sqrt"</span>
  js <span class="st">"Math.sqrt"</span>
</span>}


<span class="comment">// Return the &#96;d&#96; raised to the power of &#96;p&#96;. 
</span><span class="decl-external" id="pow"><span class="kw">extern</span> inline <a class="pp" href="std_num_double.html#pow">pow<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>pow: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tpp">d</span><span class="tp kw op">:</span><a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a><span class="tp sp">,</span> <span class="tp tpp">p</span><span class="tp kw op">:</span><a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a><span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a>  { 
  cs <span class="st">"Math.Pow"</span>
  js <span class="st">"Math.pow"</span> 
</span>}

<span class="comment">// Return the natural logarithm (in base &#95;e&#95;)  of a &#96;:double&#96; &#96;d&#96; 
</span><span class="decl-external" id="log"><span class="kw">extern</span> inline <a class="pp" href="std_num_double.html#log">log<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>log: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tpp">d</span><span class="tp kw op">:</span><a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a><span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a>  { 
  cs <span class="st">"Math.Log"</span>
  js <span class="st">"Math.log"</span> 
</span>}

<span class="comment">// Return the logarithm in base 10 of a &#96;:double&#96; &#96;d&#96;.
</span><span class="decl-fun" id="log10"><span class="kw">fun</span> <a class="pp" href="std_num_double.html#log10">log10<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>log10: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">d<span class="pc">d: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <a class="pp" href="#log">log<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>log: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">d<span class="pc">d: <span class="tp">double</span></span></a>) <a class="pp" href="std_core-source.html#_fs__1">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="#dbl_log10">dbl-log10<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>dbl<span class="dash">-</span>log10: <span class="tp">double</span></span></a>
</span>}

<span class="comment">// Return the logarithm in base 2 of a &#96;:double&#96; &#96;d&#96;.
</span><span class="decl-fun" id="log2"><span class="kw">fun</span> <a class="pp" href="std_num_double.html#log2">log2<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>log2: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">d<span class="pc">d: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <a class="pp" href="#log">log<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>log: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">d<span class="pc">d: <span class="tp">double</span></span></a>) <a class="pp" href="std_core-source.html#_fs__1">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="#dbl_log2">dbl-log2<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>dbl<span class="dash">-</span>log2: <span class="tp">double</span></span></a>
</span>}

<span class="comment">// Return &#95;e&#95; to the power of &#96;p&#96;.
</span><span class="decl-external" id="exp"><span class="kw">extern</span> inline <a class="pp" href="std_num_double.html#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( p <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  cs <span class="st">"Math.Exp"</span>
  js <span class="st">"Math.exp"</span>
</span>}

<span class="comment">// Return the 10 to the power of &#96;p&#96;.
</span><span class="decl-fun" id="exp10"><span class="kw">fun</span> <a class="pp" href="std_num_double.html#exp10">exp10<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>exp10: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">p<span class="pc">p: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <a class="pp" href="#pow">pow<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>pow: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<span class="number">10.0</span>,<a class="pp">p<span class="pc">p: <span class="tp">double</span></span></a>)
</span>}

<span class="comment">// Return the 2 to the power of &#96;p&#96;.
</span><span class="decl-fun" id="exp2"><span class="kw">fun</span> <a class="pp" href="std_num_double.html#exp2">exp2<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>exp2: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">p<span class="pc">p: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <a class="pp" href="#pow">pow<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>pow: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<span class="number">2.0</span>,<a class="pp">p<span class="pc">p: <span class="tp">double</span></span></a>)
</span>}

<span class="comment">// Return &#96;log(1.0 + x)&#96;.
// Avoids potential imprecision for small &#96;x&#96; where adding &#96;1.0&#96; explicitly
// may lead to rounding errors.
</span><span class="decl-fun" id="log1p"><span class="kw">fun</span> <a class="pp" href="std_num_double.html#log1p">log1p<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>log1p: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">x</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="#posinf_ques_">posinf?<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>posinf?: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <span class="kw">else</span> {
    <span class="kw">val</span> <a class="pp">y<span class="pc">y: <span class="tp">double</span></span></a> <span class="kw">=</span> <span class="number">1.0</span> <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a>
    <span class="kw">val</span> <a class="pp">z<span class="pc">z: <span class="tp">double</span></span></a> <span class="kw">=</span> <a class="pp">y<span class="pc">y: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_dash__2">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <span class="number">1.0</span>
    <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">z</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp" href="std_core-source.html#_eq__eq__2">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><span class="number">0.0</span>) <span class="kw">then</span> <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <span class="kw">else</span> {
      <a class="pp" href="#log">log<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>log: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">y<span class="pc">y: <span class="tp">double</span></span></a>) <a class="pp" href="std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> (<a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_fs__1">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">z<span class="pc">z: <span class="tp">double</span></span></a>)
    }
  }
</span>}

<span class="comment">// Return &#96;exp(x - 1.0)&#96;.
// Avoids rounding errors for values of &#96;x&#96; very close to &#96;1.0&#96;.
</span><span class="decl-fun" id="expm1"><span class="kw">fun</span> <a class="pp" href="std_num_double.html#expm1">expm1<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>expm1: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">x</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="#posinf_ques_">posinf?<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>posinf?: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <span class="kw">else</span> {
    <span class="kw">val</span> <a class="pp">y<span class="pc">y: <span class="tp">double</span></span></a> <span class="kw">=</span> <a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a>)
    <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">y</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp" href="std_core-source.html#_eq__eq__2">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><span class="number">1.0</span>) <span class="kw">then</span> <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> 
    <span class="kw">elif</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">y</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_dash__2">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <span class="number">1.0</span> <a class="pp" href="std_core-source.html#_eq__eq__2">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="number">-1.0</span>) <span class="kw">then</span> <span class="number">-1.0</span>
    <span class="kw">else</span> (<a class="pp">y<span class="pc">y: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_dash__2">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <span class="number">1.0</span>) <a class="pp" href="std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> (<a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_fs__1">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="#log">log<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>log: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">y<span class="pc">y: <span class="tp">double</span></span></a>))
  }
</span>}

<span class="decl-fun" id="log2p1"><span class="kw">private</span> <span class="kw">fun</span> <a class="pp" href="std_num_double.html#log2p1">log2p1<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>log2p1: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <a class="pp" href="#dbl_log2e">dbl-log2e<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>dbl<span class="dash">-</span>log2e: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="#log1p">log1p<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>log1p: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a>)
</span>}

<span class="decl-fun" id="exp2m1"><span class="kw">private</span> <span class="kw">fun</span> <a class="pp" href="std_num_double.html#exp2m1">exp2m1<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>exp2m1: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <a class="pp" href="#expm1">expm1<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>expm1: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp" href="#dbl_log2">dbl-log2<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>dbl<span class="dash">-</span>log2: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a>)
</span>}

<span class="comment">// Returns &#96;log(exp(x) + exp(y))&#96;.
// Avoids overlow/underflow errors.
</span><span class="decl-fun" id="logaddexp"><span class="kw">fun</span> <a class="pp" href="std_num_double.html#logaddexp">logaddexp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>logaddexp: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">x</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp" href="std_core-source.html#_eq__eq__2">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><a class="pp">y<span class="pc">y: <span class="tp">double</span></span></a>) <span class="kw">then</span> <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="#dbl_log2">dbl-log2<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>dbl<span class="dash">-</span>log2: <span class="tp">double</span></span></a> <span class="kw">else</span> {
    <span class="kw">val</span> <a class="pp">z<span class="pc">z: <span class="tp">double</span></span></a> <span class="kw">=</span> <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_dash__2">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">y<span class="pc">y: <span class="tp">double</span></span></a>
    <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">z</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_gt__2">&gt;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&gt;)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="number">0.0</span>) <span class="kw">then</span> <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="#log1p">log1p<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>log1p: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp" href="std_core-source.html#_tilde__1">~<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(~)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><a class="pp">z<span class="pc">z: <span class="tp">double</span></span></a>))
                 <span class="kw">else</span> <a class="pp">y<span class="pc">y: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="#log1p">log1p<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>log1p: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">z<span class="pc">z: <span class="tp">double</span></span></a>))
  }
</span>}

<span class="comment">// Returns &#96;log2( exp2(x) + exp2(y) )&#96;.
// Avoids overlow/underflow errors.
</span><span class="decl-fun" id="logaddexp2"><span class="kw">fun</span> <a class="pp" href="std_num_double.html#logaddexp2">logaddexp2<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>logaddexp2: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">x</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp" href="std_core-source.html#_eq__eq__2">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><a class="pp">y<span class="pc">y: <span class="tp">double</span></span></a>) <span class="kw">then</span> <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <span class="number">1.0</span> <span class="kw">else</span> {
    <span class="kw">val</span> <a class="pp">z<span class="pc">z: <span class="tp">double</span></span></a> <span class="kw">=</span> <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_dash__2">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">y<span class="pc">y: <span class="tp">double</span></span></a>
    <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">z</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_gt__2">&gt;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&gt;)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="number">0.0</span>) <span class="kw">then</span> <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="#log2p1">log2p1<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>log2p1: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp" href="#exp2">exp2<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>exp2: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp" href="std_core-source.html#_tilde__1">~<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(~)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><a class="pp">z<span class="pc">z: <span class="tp">double</span></span></a>))
                 <span class="kw">else</span> <a class="pp">y<span class="pc">y: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="#log2p1">log2p1<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>log2p1: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp" href="#exp2">exp2<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>exp2: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">z<span class="pc">z: <span class="tp">double</span></span></a>))
  }
</span>}



<span class="comment">//-----------------------------------------
// Other
//-----------------------------------------
</span>
<span class="comment">// 'Load exponent': returns &#96;x&#96;&amp;middot;2^&#96;exp&#96;^.
</span><span class="decl-fun" id="ldexp"><span class="kw">fun</span> <a class="pp" href="std_num_double.html#ldexp">ldexp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>ldexp: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">e</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a>, <a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">!</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp" href="#finite_ques_">finite?<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>finite?: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a>)) <span class="kw">then</span> <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <span class="kw">else</span> <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a><a class="pp" href="std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><a class="pp" href="#exp2">exp2<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>exp2: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>)
</span>}

<span class="comment">// 'Fraction/exponent': return the normalized fraction &#96;f&#96; and exponent &#96;exp&#96;
// for a number &#96;x&#96; such that &#96;x == f&#96;&amp;middot;2^&#96;exp&#96;^.
</span><span class="decl-fun" id="frexp"><span class="kw">fun</span> <a class="pp" href="std_num_double.html#frexp">frexp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>frexp: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space__lp__comma__rp_"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp sp">(</span><span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a><span class="tp sp">,</span><a class="pp" href="std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a><a class="pp" href="std_core-source.html#type_space__lp__comma__rp_"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp sp">(</span><span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">!</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp" href="#finite_ques_">finite?<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>finite?: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a>)) <span class="kw">then</span> <a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a>,<span class="number">0</span><a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a> <span class="kw">else</span> {
    <span class="kw">val</span> <a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a>    <span class="kw">=</span> <a class="pp" href="#log2">log2<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>log2: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#abs_1">abs<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>abs<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>)<span class="kw op">.</span><a class="pp" href="#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#int_2">int<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
    <span class="kw">val</span> <a class="pp">frac<span class="pc">frac: <span class="tp">double</span></span></a> <span class="kw">=</span> <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">e</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_gt__1">&gt;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&gt;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="number">1023</span>) 
                <span class="kw">then</span> (<a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_fs__1">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="#exp2">exp2<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>exp2: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<span class="number">1023.0</span>))<a class="pp" href="std_core-source.html#_fs__1">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><a class="pp" href="#exp2">exp2<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>exp2: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_dash__2">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <span class="number">1023.0</span>) <span class="comment">// prevent overflow
</span>                <span class="kw">else</span> (<a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_fs__1">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="#exp2">exp2<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>exp2: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>))
    <a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">frac<span class="pc">frac: <span class="tp">double</span></span></a>,<a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a><a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a>
  }
</span>}


<span class="comment">// Return the sum of a list of doubles. 
// Uses [Kahan-Babu&amp;scaron;kan-Neumaier summation](https://en.wikipedia.org/wiki/Kahan&#95;summation&#95;algorithm#Further&#95;enhancements) 
// to minimize rounding errors. This
// is more precise as Kahan summation and about as fast.\
// &#96;[1.0e3,1.0e97,1.0e3,-1.0e97].sum == 2000.0&#96;\
// A. Neumaier, &#95;Rundungsfehleranalyse einiger Verfahren zur Summation endlicher Summen&#95;.
// Math. Mechanik, 54:39--51, 1974.
</span><span class="decl-fun" id="sum"><span class="kw">fun</span> <a class="pp" href="std_num_double.html#sum">sum<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>sum: <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">double</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">xs<span class="pc">xs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">double</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a>
{
  <span class="kw">var</span> <a class="pp">total<span class="pc">total: <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp tv">&#95;89</span><span class="tp sp">,</span><span class="tp">double</span><span class="tp sp">&gt;</span></span></a> <span class="kw op">:=</span> <span class="number">0.0</span>
  <span class="kw">var</span> <a class="pp">comp<span class="pc">comp: <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp tv">&#95;89</span><span class="tp sp">,</span><span class="tp">double</span><span class="tp sp">&gt;</span></span></a>  <span class="kw op">:=</span> <span class="number">0.0</span>
  <a class="pp">xs<span class="pc">xs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">double</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#foreach">foreach<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>foreach: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp sp">(</span><span class="tp sp">)</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a> <span class="kw">fun</span>(<a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a>) {
    <span class="kw">val</span> <a class="pp">t<span class="pc">t: <span class="tp">double</span></span></a> <span class="kw">=</span> <a class="pp">total<span class="pc">total: <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp tv">&#95;89</span><span class="tp sp">,</span><span class="tp">double</span><span class="tp sp">&gt;</span></span></a> <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a>
    <span class="kw">val</span> <a class="pp">c<span class="pc">c: <span class="tp">double</span></span></a> <span class="kw">=</span> <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">total</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#abs_1">abs<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>abs<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_gt__eq__2">&gt;=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&gt;=)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#abs_1">abs<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>abs<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>) <span class="kw">then</span> (<a class="pp">total<span class="pc">total: <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp tv">&#95;89</span><span class="tp sp">,</span><span class="tp">double</span><span class="tp sp">&gt;</span></span></a> <a class="pp" href="std_core-source.html#_dash__2">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">t<span class="pc">t: <span class="tp">double</span></span></a>) <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <span class="kw">else</span> (<a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_dash__2">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">t<span class="pc">t: <span class="tp">double</span></span></a>) <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">total<span class="pc">total: <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp tv">&#95;89</span><span class="tp sp">,</span><span class="tp">double</span><span class="tp sp">&gt;</span></span></a>
    <a class="pp">comp<span class="pc">comp: <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp tv">&#95;89</span><span class="tp sp">,</span><span class="tp">double</span><span class="tp sp">&gt;</span></span></a>  <a class="pp" href="std_core-source.html#set"><span class="kw">:=</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>set: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">ref</span> <span class="tp kw op">:</span> <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">assigned</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">write</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a> <a class="pp">comp<span class="pc">comp: <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp tv">&#95;89</span><span class="tp sp">,</span><span class="tp">double</span><span class="tp sp">&gt;</span></span></a> <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">c<span class="pc">c: <span class="tp">double</span></span></a>
    <a class="pp">total<span class="pc">total: <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp tv">&#95;89</span><span class="tp sp">,</span><span class="tp">double</span><span class="tp sp">&gt;</span></span></a> <a class="pp" href="std_core-source.html#set"><span class="kw">:=</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>set: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">ref</span> <span class="tp kw op">:</span> <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">assigned</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">write</span><span class="tp sp">&lt;</span><span class="tp tv">h</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a> <a class="pp">t<span class="pc">t: <span class="tp">double</span></span></a>
  }
  <a class="pp">total<span class="pc">total: <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp tv">&#95;89</span><span class="tp sp">,</span><span class="tp">double</span><span class="tp sp">&gt;</span></span></a> <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">comp<span class="pc">comp: <span class="tp">ref</span><span class="tp sp">&lt;</span><span class="tp tv">&#95;89</span><span class="tp sp">,</span><span class="tp">double</span><span class="tp sp">&gt;</span></span></a>;
</span>}

<span class="comment">// The hypotenuse of &#96;x&#96; and &#96;y&#96;: &#96;sqrt(x&#42;x + y&#42;y)&#96;.
// Prevents overflow for large numbers.
</span><span class="decl-fun" id="hypot"><span class="kw">fun</span> <a class="pp" href="std_num_double.html#hypot">hypot<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>hypot: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <span class="kw">val</span> <a class="pp">xx<span class="pc">xx: <span class="tp">double</span></span></a> <span class="kw">=</span> <a class="pp" href="std_core-source.html#abs_1">abs<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>abs<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a>)
  <span class="kw">val</span> <a class="pp">yy<span class="pc">yy: <span class="tp">double</span></span></a> <span class="kw">=</span> <a class="pp" href="std_core-source.html#abs_1">abs<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>abs<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">y<span class="pc">y: <span class="tp">double</span></span></a>)
  <span class="kw">val</span> <a class="pp">lo<span class="pc">lo: <span class="tp">double</span></span></a> <span class="kw">=</span> <a class="pp" href="std_core-source.html#min_1">min<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>min<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">xx<span class="pc">xx: <span class="tp">double</span></span></a>,<a class="pp">yy<span class="pc">yy: <span class="tp">double</span></span></a>)
  <span class="kw">val</span> <a class="pp">hi<span class="pc">hi: <span class="tp">double</span></span></a> <span class="kw">=</span> <a class="pp" href="std_core-source.html#max_1">max<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>max<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">xx<span class="pc">xx: <span class="tp">double</span></span></a>,<a class="pp">yy<span class="pc">yy: <span class="tp">double</span></span></a>)
  <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">hi</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp" href="std_core-source.html#_eq__eq__2">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><span class="number">0.0</span>) <span class="kw">then</span> <span class="number">0.0</span> <span class="kw">else</span> {
    <span class="kw">val</span> <a class="pp">z<span class="pc">z: <span class="tp">double</span></span></a>  <span class="kw">=</span> <a class="pp">lo<span class="pc">lo: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_fs__1">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">hi<span class="pc">hi: <span class="tp">double</span></span></a>
    <a class="pp">hi<span class="pc">hi: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="#sqrt">sqrt<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>sqrt: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <span class="number">1.0</span> <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">z<span class="pc">z: <span class="tp">double</span></span></a><a class="pp" href="std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><a class="pp">z<span class="pc">z: <span class="tp">double</span></span></a> )
  }
</span>}

<span class="comment">// The square root of the sum of the squares of three doubles.
// Prevents overflow for large numbers.
</span><span class="decl-fun" id="hypot_1"><span class="kw">fun</span> <a class="pp" href="std_num_double.html#hypot_1">hypot<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>hypot<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">z</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a>, <a class="pp">z<span class="pc">z: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <span class="kw">val</span> <a class="pp">xx<span class="pc">xx: <span class="tp">double</span></span></a> <span class="kw">=</span> <a class="pp" href="std_core-source.html#abs_1">abs<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>abs<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a>)
  <span class="kw">val</span> <a class="pp">yy<span class="pc">yy: <span class="tp">double</span></span></a> <span class="kw">=</span> <a class="pp" href="std_core-source.html#abs_1">abs<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>abs<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">y<span class="pc">y: <span class="tp">double</span></span></a>)
  <span class="kw">val</span> <a class="pp">zz<span class="pc">zz: <span class="tp">double</span></span></a> <span class="kw">=</span> <a class="pp" href="std_core-source.html#abs_1">abs<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>abs<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">z<span class="pc">z: <span class="tp">double</span></span></a>)
  <span class="kw">val</span> <a class="pp">hi<span class="pc">hi: <span class="tp">double</span></span></a> <span class="kw">=</span> <a class="pp" href="std_core-source.html#max_1">max<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>max<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp" href="std_core-source.html#max_1">max<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>max<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">xx<span class="pc">xx: <span class="tp">double</span></span></a>,<a class="pp">yy<span class="pc">yy: <span class="tp">double</span></span></a>),<a class="pp">zz<span class="pc">zz: <span class="tp">double</span></span></a>)
  <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">hi</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp" href="std_core-source.html#_eq__eq__2">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><span class="number">0.0</span>) <span class="kw">then</span> <span class="number">0.0</span> <span class="kw">else</span> {
    <a class="pp">hi<span class="pc">hi: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="#sqrt">sqrt<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>sqrt: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp" href="#sqr">sqr<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>sqr: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">xx<span class="pc">xx: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_fs__1">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">hi<span class="pc">hi: <span class="tp">double</span></span></a>) <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="#sqr">sqr<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>sqr: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">yy<span class="pc">yy: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_fs__1">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">hi<span class="pc">hi: <span class="tp">double</span></span></a>) <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="#sqr">sqr<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>sqr: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">zz<span class="pc">zz: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_fs__1">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">hi<span class="pc">hi: <span class="tp">double</span></span></a>) )
  }
</span>}

<span class="comment">// The square root of the sum of squares of a list of doubles.
// Prevents overflow for large numbers and uses Kahan-Babu&amp;scaron;kan-Neumaier summation
// for precision.
</span><span class="decl-fun" id="hypot_2"><span class="kw">fun</span> <a class="pp" href="std_num_double.html#hypot_2">hypot<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>hypot<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">double</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">xs<span class="pc">xs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">double</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <span class="kw">val</span> <a class="pp">hi<span class="pc">hi: <span class="tp">double</span></span></a> <span class="kw">=</span> <a class="pp">xs<span class="pc">xs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">double</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="#abs_max_1">abs-max<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>abs<span class="dash">-</span>max<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">double</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>
  <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">hi</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp" href="std_core-source.html#_eq__eq__2">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><span class="number">0.0</span>) <span class="kw">then</span> <span class="number">0.0</span> <span class="kw">else</span> {
    <a class="pp">hi<span class="pc">hi: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">xs<span class="pc">xs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">double</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#map_5">map<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>map<span class="postfix">.5</span>: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">b</span><span class="tp sp">&gt;</span></span></a>(<span class="kw">fun</span>(<a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a>){ <a class="pp" href="#sqr">sqr<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>sqr: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_fs__1">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">hi<span class="pc">hi: <span class="tp">double</span></span></a>) })<span class="kw op">.</span><a class="pp" href="#sum">sum<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>sum: <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">double</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="#sqrt">sqrt<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>sqrt: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> 
  }
</span>}

<span class="comment">// The square of a double
</span><span class="decl-fun" id="sqr"><span class="kw">fun</span> <a class="pp" href="std_num_double.html#sqr">sqr<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>sqr: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> )<span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a><a class="pp" href="std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a>
</span>}

<span class="comment">// The maximum of the absolute values.
</span><span class="decl-fun" id="abs_max"><span class="kw">fun</span> <a class="pp" href="std_num_double.html#abs_max">abs-max<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>abs<span class="dash">-</span>max: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <a class="pp" href="std_core-source.html#max_1">max<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>max<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp" href="std_core-source.html#abs_1">abs<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>abs<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a>),<a class="pp" href="std_core-source.html#abs_1">abs<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>abs<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">y<span class="pc">y: <span class="tp">double</span></span></a>))
</span>} 

<span class="comment">// The maximum of a list of absolute values.
</span><span class="decl-fun" id="abs_max_1"><span class="kw">fun</span> <a class="pp" href="std_num_double.html#abs_max_1">abs-max<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>abs<span class="dash">-</span>max<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">double</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">xs<span class="pc">xs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">double</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <a class="pp">xs<span class="pc">xs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">double</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#foldr">foldr<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>foldr: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">z</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span></span></a>(<span class="number">0.0</span>,<span class="kw">fun</span>(<a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a>,<a class="pp">m<span class="pc">m: <span class="tp">double</span></span></a>){ <a class="pp" href="std_core-source.html#max_1">max<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>max<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp" href="std_core-source.html#abs_1">abs<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>abs<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a>),<a class="pp">m<span class="pc">m: <span class="tp">double</span></span></a>) })
</span>}

<span class="comment">//-----------------------------------------
// Trigonometry
//-----------------------------------------
</span>
<span class="decl-val" id="rad2deg"><span class="kw">private</span> <span class="kw">val</span> <a class="pp" href="std_num_double.html#rad2deg">rad2deg<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>rad2deg: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="number">180.0</span><a class="pp" href="std_core-source.html#_fs__1">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><a class="pp" href="#pi">pi<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>pi: <span class="tp">double</span></span></a></span>
<span class="decl-val" id="deg2rad"><span class="kw">private</span> <span class="kw">val</span> <a class="pp" href="std_num_double.html#deg2rad">deg2rad<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>deg2rad: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="#pi">pi<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>pi: <span class="tp">double</span></span></a><a class="pp" href="std_core-source.html#_fs__1">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><span class="number">180.0</span></span>

<span class="comment">// Convert radians to degrees.
</span><span class="decl-fun" id="deg"><span class="kw">fun</span> <a class="pp" href="std_num_double.html#deg">deg<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>deg: <span class="tp sp">(</span><span class="tp tpp">rad</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">rad<span class="pc">rad: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <a class="pp">rad<span class="pc">rad: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="#rad2deg">rad2deg<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>rad2deg: <span class="tp">double</span></span></a>
</span>}

<span class="comment">// Convert degrees to radians.
</span><span class="decl-fun" id="rad"><span class="kw">fun</span> <a class="pp" href="std_num_double.html#rad">rad<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>rad: <span class="tp sp">(</span><span class="tp tpp">deg</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">deg<span class="pc">deg: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <a class="pp">deg<span class="pc">deg: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="#deg2rad">deg2rad<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>deg2rad: <span class="tp">double</span></span></a>
</span>}

<span class="comment">// Return the sine of an angle in radians &#96;d&#96;.
</span><span class="decl-external" id="sin"><span class="kw">extern</span> inline <a class="pp" href="std_num_double.html#sin">sin<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>sin: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( d <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  cs <span class="st">"Math.Sin"</span>
  js <span class="st">"Math.sin"</span>
</span>}

<span class="comment">// Return the cosine of an angle in radians &#96;d&#96;.
</span><span class="decl-external" id="cos"><span class="kw">extern</span> inline <a class="pp" href="std_num_double.html#cos">cos<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>cos: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( d <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  cs <span class="st">"Math.Cos"</span>
  js <span class="st">"Math.cos"</span>
</span>}

<span class="comment">// Return the tangent of an angle in radians &#96;d&#96;.
</span><span class="decl-external" id="tan"><span class="kw">extern</span> inline <a class="pp" href="std_num_double.html#tan">tan<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>tan: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( d <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  cs <span class="st">"Math.Tan"</span>
  js <span class="st">"Math.tan"</span>
</span>}
<span class="comment">// Return the arc-tangent of &#96;d&#96;
</span><span class="decl-external" id="atan"><span class="kw">extern</span> inline <a class="pp" href="std_num_double.html#atan">atan<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>atan: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( d <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  cs <span class="st">"Math.Atan"</span>
  js <span class="st">"Math.atan"</span>
</span>}

<span class="comment">// Return the arc-tangent of a point (&#96;x&#96;,&#96;y&#96;).
</span><span class="decl-external" id="atan2"><span class="kw">extern</span> inline <a class="pp" href="std_num_double.html#atan2">atan2<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>atan2: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( x <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a>, y <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  cs <span class="st">"Math.Atan2"</span>
  js <span class="st">"Math.atan2"</span>
</span>}

<span class="comment">// Return the arc-cosine of &#96;d&#96;
</span><span class="decl-external" id="acos"><span class="kw">extern</span> inline <a class="pp" href="std_num_double.html#acos">acos<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>acos: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( d <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  cs <span class="st">"Math.Acos"</span>
  js <span class="st">"Math.acos"</span>
</span>}

<span class="comment">// Return the arc-sine of &#96;d&#96;
</span><span class="decl-external" id="asin"><span class="kw">extern</span> inline <a class="pp" href="std_num_double.html#asin">asin<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>asin: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( d <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  cs <span class="st">"Math.Asin"</span>
  js <span class="st">"Math.asin"</span>
</span>}


<span class="comment">// The hyperbolic tangent of &#96;d&#96;
</span><span class="decl-external" id="tanh"><span class="kw">extern</span> inline <a class="pp" href="std_num_double.html#tanh">tanh<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>tanh: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( d <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  cs <span class="st">"Math.Tanh"</span>
  js <span class="st">"Math.tanh"</span>
</span>}

<span class="comment">// The hyperbolic cosine of &#96;d&#96;
</span><span class="decl-external" id="cosh"><span class="kw">extern</span> inline <a class="pp" href="std_num_double.html#cosh">cosh<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>cosh: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( d <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  cs <span class="st">"Math.Cosh"</span>
  js <span class="st">"Math.cosh"</span>
</span>}

<span class="comment">// The hyperbolic sine of &#96;d&#96;
</span><span class="decl-external" id="sinh"><span class="kw">extern</span> inline <a class="pp" href="std_num_double.html#sinh">sinh<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>sinh: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( d <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  cs <span class="st">"Math.Sinh"</span>
  js <span class="st">"Math.sinh"</span>
</span>}


<span class="comment">// Return &#96;x&#96; with the sign of &#96;y&#96;.
</span><span class="decl-fun" id="with_sign_of"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_double.html#with_sign_of">with-sign-of<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>with<span class="dash">-</span>sign<span class="dash">-</span>of: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">y</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_lt__3">&lt;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&lt;)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="number">0.0</span>) <span class="kw">then</span> <a class="pp" href="std_core-source.html#_tilde__1">~<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(~)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#abs_1">abs<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>abs<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>) <span class="kw">else</span> <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#abs_1">abs<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>abs<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>
</span>}


<span class="comment">// The area hyperbolic tangent of &#96;x&#96;
</span><span class="decl-fun" id="atanh"><span class="kw">fun</span> <a class="pp" href="std_num_double.html#atanh">atanh<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>atanh: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <span class="number">0.5</span><a class="pp" href="std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><a class="pp" href="#log">log<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>log: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( (<span class="number">1.0</span> <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a>) <a class="pp" href="std_core-source.html#_fs__1">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> (<span class="number">1.0</span> <a class="pp" href="std_core-source.html#_dash__2">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a>))
  <span class="comment">/&#42;
  // 0.5&#42;log( (1.0 + x) / (1.0 - x)) = 0.5&#42;log1p( (2.0&#42;x) / (1-x) )
  if (x.abs &gt;= 0.5) then 0.5&#42;log1p(2.0&#42;(x/(1.0 - x))) else {
    val x2 = x + x
    0.5&#42;log1p(x2 + (x2&#42;x)/(1.0 - x))    
  }
  &#42;/</span>
</span>}

<span class="decl-val" id="exp2__28"><span class="kw">private</span> <span class="kw">val</span> <a class="pp" href="std_num_double.html#exp2__28">exp2&#95;28<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>exp2&#95;28: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="number">268435456.0</span></span>

<span class="comment">// The area hyperbolic cosine of &#96;x&#96;
</span><span class="decl-fun" id="acosh"><span class="kw">fun</span> <a class="pp" href="std_num_double.html#acosh">acosh<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>acosh: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <span class="comment">// log(x + sqrt((x - 1.0)&#42;(x + 1.0)));
</span>  <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">x</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_gt__2">&gt;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&gt;)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="#exp2__28">exp2&#95;28<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>exp2&#95;28: <span class="tp">double</span></span></a>) <span class="kw">then</span> <a class="pp" href="#dbl_log2">dbl-log2<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>dbl<span class="dash">-</span>log2: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="#log">log<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>log: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a>)
  <span class="kw">elif</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">x</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_gt__2">&gt;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&gt;)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="number">2.0</span>) <span class="kw">then</span> {
    <a class="pp" href="#log">log<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>log: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<span class="number">2.0</span><a class="pp" href="std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_dash__2">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <span class="number">1.0</span><a class="pp" href="std_core-source.html#_fs__1">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="#sqrt">sqrt<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>sqrt: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="#sqr">sqr<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>sqr: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_dash__2">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <span class="number">1.0</span>)))
  }
  <span class="kw">elif</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">x</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_lt__eq__3">&lt;=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&lt;=)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="number">1.0</span>) <span class="kw">then</span> (<span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">x</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_lt__3">&lt;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&lt;)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="number">1.0</span>) <span class="kw">then</span> <a class="pp" href="#nan">nan<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>nan: <span class="tp">double</span></span></a> <span class="kw">else</span> <span class="number">0.0</span>)
  <span class="kw">else</span> {
    <span class="kw">val</span> <a class="pp">xm1<span class="pc">xm1: <span class="tp">double</span></span></a> <span class="kw">=</span> <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_dash__2">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <span class="number">1.0</span>
    <a class="pp" href="#log1p">log1p<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>log1p: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">xm1<span class="pc">xm1: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="#sqrt">sqrt<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>sqrt: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<span class="number">2.0</span><a class="pp" href="std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><a class="pp">xm1<span class="pc">xm1: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">xm1<span class="pc">xm1: <span class="tp">double</span></span></a><a class="pp" href="std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><a class="pp">xm1<span class="pc">xm1: <span class="tp">double</span></span></a>) )
  }
</span>}

<span class="comment">// The area hyperbolic sine of &#96;x&#96;
</span><span class="decl-fun" id="asinh"><span class="kw">fun</span> <a class="pp" href="std_num_double.html#asinh">asinh<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>asinh: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <span class="comment">//log( x + sqrt(x.sqr + 1.0))
</span>  <span class="kw">val</span> <a class="pp">xa<span class="pc">xa: <span class="tp">double</span></span></a> <span class="kw">=</span> <a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#abs_1">abs<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>abs<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>
  <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">xa</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_gt__2">&gt;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&gt;)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="#exp2__28">exp2&#95;28<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>exp2&#95;28: <span class="tp">double</span></span></a>) <span class="kw">then</span> (<a class="pp" href="#log">log<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>log: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">xa<span class="pc">xa: <span class="tp">double</span></span></a>) <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="#dbl_log2">dbl-log2<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>dbl<span class="dash">-</span>log2: <span class="tp">double</span></span></a>)<span class="kw op">.</span><a class="pp" href="#with_sign_of">with-sign-of<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>with<span class="dash">-</span>sign<span class="dash">-</span>of: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a>) 
  <span class="kw">elif</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">xa</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_gt__eq__2">&gt;=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&gt;=)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="number">2.0</span>) <span class="kw">then</span> (<a class="pp" href="#log">log<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>log: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<span class="number">2.0</span><a class="pp" href="std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><a class="pp">xa<span class="pc">xa: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <span class="number">1.0</span><a class="pp" href="std_core-source.html#_fs__1">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">xa<span class="pc">xa: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="#sqrt">sqrt<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>sqrt: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">xa<span class="pc">xa: <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="#sqr">sqr<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>sqr: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <span class="number">1.0</span>))))<span class="kw op">.</span><a class="pp" href="#with_sign_of">with-sign-of<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>with<span class="dash">-</span>sign<span class="dash">-</span>of: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a>)
  <span class="kw">elif</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">xa</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_eq__eq__2">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="number">0.0</span>) <span class="kw">then</span> <span class="number">0.0</span>
  <span class="kw">else</span> {
    <span class="kw">val</span> <a class="pp">xa2<span class="pc">xa2: <span class="tp">double</span></span></a> <span class="kw">=</span> <a class="pp">xa<span class="pc">xa: <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="#sqr">sqr<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>sqr: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>
    <a class="pp" href="#log1p">log1p<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>log1p: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">xa<span class="pc">xa: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">xa2<span class="pc">xa2: <span class="tp">double</span></span></a><a class="pp" href="std_core-source.html#_fs__1">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<span class="number">1.0</span> <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="#sqrt">sqrt<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>sqrt: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">xa2<span class="pc">xa2: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <span class="number">1.0</span> )))<span class="kw op">.</span><a class="pp" href="#with_sign_of">with-sign-of<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>double<span class="fslash last">/</span></span>with<span class="dash">-</span>sign<span class="dash">-</span>of: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">double</span></span></a>)
  }
</span>}

</pre>

</div></body>
</html>
