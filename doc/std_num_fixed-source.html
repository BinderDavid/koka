<!DOCTYPE html>
<html>
<!-- NO_CLICK_TRACKING -->

<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />

<style type="text/css">.koka .plaincode, .koka a.pp .pc { display: none; } .koka a.pp { color: inherit; text-decoration: none; }</style>
<link rel="stylesheet" type="text/css" href="styles/madoko.css" />
<link rel="stylesheet" type="text/css" href="styles/koka.css" />

<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Noto+Serif:400,400italic,700,700italic" />
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700,400italic" />

<title>fixed.kk documentation</title>
</head>

<body class="koka doc body"><div class="madoko">
<pre class="koka source"><span class="comment">/&#42;---------------------------------------------------------------------------
  Copyright 2012-2016 Microsoft Corporation.
 
  This is free software; you can redistribute it and/or modify it under the
  terms of the Apache License, Version 2.0. A copy of the License can be
  found in the file "license.txt" at the root of this distribution.
---------------------------------------------------------------------------&#42;/</span>

<span class="comment">// Operations on 'fixed'ed point numbers. 
//
// These have infinite range and precision for the whole part, and a precision of up to 15 digits after the dot.
// Internally they are represented by a infinite range &#96;:int&#96; for the whole
// part and a &#96;:double&#96; to represent the fraction. 
// A &#96;:fixed&#96; generally has better performance than arbitrary precision [&#96;:decimal&#96;](std&#95;num&#95;decimal.html)s.
</span><span class="kw">module</span> fixed

<span class="kw">import</span> regex

  
<span class="comment">// A &#96;:fixed&#96; has infinite range and a precision of up to 15 digits after the dot.
// Internally they are represented by a infinite range &#96;:int&#96; for the whole
// part and a &#96;:double&#96; to represent the fraction. 
// A &#96;:fixed&#96; generally has better performance than arbitrary precision [&#96;:decimal&#96;](std&#95;num&#95;decimal.html)s.
</span><span class="decl-type" id="type_space_fixed"><span class="kw">abstract</span> <span class="tp kw">struct</span> <span class="decl-con" id="con_space_Fixed"><a class="pp" href="std_num_fixed.html#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> (
  <span class="comment">// value == trunc + frac / base
</span>  <span class="kw">public</span> <span class="decl-fun" id="trunc"><a class="pp">trunc<span class="pc">trunc: <span class="tp">int</span></span></a></span><span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a>,
  <span class="decl-fun" id="frac"><a class="pp">frac<span class="pc">frac: <span class="tp">double</span></span></a></span>        <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a>  <span class="comment">// 'fraction':  -base &lt; frac &lt; base
</span></span></span>)

<span class="decl-val" id="scale"><span class="kw">val</span> <a class="pp" href="std_num_fixed.html#scale">scale<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>scale: <span class="tp">int</span></span></a> <span class="kw">=</span> <span class="number">16</span></span>
<span class="decl-val" id="base"><span class="kw">val</span> <a class="pp" href="std_num_fixed.html#base">base<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>base: <span class="tp">double</span></span></a> <span class="kw">=</span> <span class="number">1.0e16</span></span>

<span class="comment">// The &#96;:fixed&#96; point zero.
</span><span class="decl-val" id="zero"><span class="kw">public</span> <span class="kw">val</span> <a class="pp" href="std_num_fixed.html#zero">zero<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>zero: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="#con_space_Fixed"><span class="co">Fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>Fixed: <span class="tp sp">(</span><span class="tp tpp">trunc</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>(<span class="number">0</span>,<span class="number">0.0</span></span>)


<span class="decl-fun" id="fixed"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#fixed">fixed<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a>, <a class="pp">prec<span class="pc">prec: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="number">0</span> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> {
  <span class="kw">val</span> <a class="pp">p<span class="pc">p: <span class="tp">int</span></span></a> <span class="kw">=</span> <a class="pp" href="std_core-source.html#max">max<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>max: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<span class="number">0</span>,<a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a>)
  <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">p</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#zero_ques_">zero?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>zero?: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp" href="#con_space_Fixed"><span class="co">Fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>Fixed: <span class="tp sp">(</span><span class="tp tpp">trunc</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a>,<span class="number">0.0</span>) <span class="kw">else</span> {
    <span class="kw">val</span> <a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a> <span class="kw">=</span> <a class="pp" href="std_core-source.html#cdiv_pow10">cdiv-pow10<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>cdiv<span class="dash">-</span>pow10: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a>,<a class="pp">p<span class="pc">p: <span class="tp">int</span></span></a>)
    <span class="kw">val</span> <a class="pp">r<span class="pc">r: <span class="tp">int</span></span></a> <span class="kw">=</span> <a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a> <a class="pp" href="std_core-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#mul_pow10">mul-pow10<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>mul<span class="dash">-</span>pow10: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">p<span class="pc">p: <span class="tp">int</span></span></a>)
    <span class="kw">val</span> <a class="pp">rr<span class="pc">rr: <span class="tp">int</span></span></a> <span class="kw">=</span> <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">p</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_gt__1">&gt;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&gt;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="#scale">scale<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>scale: <span class="tp">int</span></span></a>) <span class="kw">then</span> <a class="pp">r<span class="pc">r: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#cdiv_pow10">cdiv-pow10<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>cdiv<span class="dash">-</span>pow10: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">p<span class="pc">p: <span class="tp">int</span></span></a> <a class="pp" href="std_core-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="#scale">scale<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>scale: <span class="tp">int</span></span></a>) <span class="kw">else</span> <a class="pp">r<span class="pc">r: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#mul_pow10">mul-pow10<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>mul<span class="dash">-</span>pow10: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp" href="#scale">scale<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>scale: <span class="tp">int</span></span></a> <a class="pp" href="std_core-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">p<span class="pc">p: <span class="tp">int</span></span></a>)
    <a class="pp" href="#con_space_Fixed"><span class="co">Fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>Fixed: <span class="tp sp">(</span><span class="tp tpp">trunc</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>(<a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a>,<a class="pp">rr<span class="pc">rr: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>)
  }
</span>}

<span class="comment">// Create a &#96;:fixed&#96; point number from a &#96;:double&#96;.
</span><span class="decl-fun" id="fixed_1"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#fixed_1">fixed<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>( <a class="pp">d<span class="pc">d: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">d</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#nan_ques_">nan?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>nan?: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_bar__bar_">||<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(||): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">d<span class="pc">d: <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#inf_ques_">inf?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>inf?: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp" href="#zero">zero<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>zero: <span class="tp">fixed</span></span></a> <span class="kw">else</span> {
    <span class="kw">val</span> <a class="pp">fl<span class="pc">fl: <span class="tp">double</span></span></a> <span class="kw">=</span> <a class="pp">d<span class="pc">d: <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>
    <span class="kw">val</span> <a class="pp">fr<span class="pc">fr: <span class="tp">double</span></span></a> <span class="kw">=</span> ((<a class="pp">d<span class="pc">d: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_dash__2">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">fl<span class="pc">fl: <span class="tp">double</span></span></a>)<a class="pp" href="std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><a class="pp" href="#base">base<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>base: <span class="tp">double</span></span></a>)<span class="kw op">.</span><a class="pp" href="std_core-source.html#round">round<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>round: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>
    <a class="pp" href="#fixed_frac_sign">fixed-frac-sign<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed<span class="dash">-</span>frac<span class="dash">-</span>sign: <span class="tp sp">(</span><span class="tp tpp">tr</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">fr</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>(<a class="pp">fl<span class="pc">fl: <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#int_2">int<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>,<a class="pp">fr<span class="pc">fr: <span class="tp">double</span></span></a>)
  }
</span>}

<span class="comment">// use when the fraction can be between -2&#42;base &lt; fr &lt; 2&#42;base, and the signs may not agree
</span><span class="decl-fun" id="fixed_frac_ovf"><span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#fixed_frac_ovf">fixed-frac-ovf<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed<span class="dash">-</span>frac<span class="dash">-</span>ovf: <span class="tp sp">(</span><span class="tp tpp">tr</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">fr</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>( <a class="pp">tr<span class="pc">tr: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a>, <a class="pp">fr<span class="pc">fr: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">fr</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_gt__eq__2">&gt;=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&gt;=)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="#base">base<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>base: <span class="tp">double</span></span></a>) <span class="kw">then</span> <a class="pp" href="#fixed_frac_sign">fixed-frac-sign<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed<span class="dash">-</span>frac<span class="dash">-</span>sign: <span class="tp sp">(</span><span class="tp tpp">tr</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">fr</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>(<a class="pp">tr<span class="pc">tr: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#inc">inc<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>inc: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>,<a class="pp">fr<span class="pc">fr: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_dash__2">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="#base">base<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>base: <span class="tp">double</span></span></a>)
  <span class="kw">elif</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">fr</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_lt__eq__3">&lt;=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&lt;=)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_tilde__1">~<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(~)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><a class="pp" href="#base">base<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>base: <span class="tp">double</span></span></a>) <span class="kw">then</span> <a class="pp" href="#fixed_frac_sign">fixed-frac-sign<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed<span class="dash">-</span>frac<span class="dash">-</span>sign: <span class="tp sp">(</span><span class="tp tpp">tr</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">fr</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>(<a class="pp">tr<span class="pc">tr: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#dec">dec<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>dec: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>,<a class="pp">fr<span class="pc">fr: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="#base">base<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>base: <span class="tp">double</span></span></a>)
  <span class="kw">else</span> <a class="pp" href="#fixed_frac_sign">fixed-frac-sign<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed<span class="dash">-</span>frac<span class="dash">-</span>sign: <span class="tp sp">(</span><span class="tp tpp">tr</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">fr</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>(<a class="pp">tr<span class="pc">tr: <span class="tp">int</span></span></a>,<a class="pp">fr<span class="pc">fr: <span class="tp">double</span></span></a>)
</span>}

<span class="comment">// use when fraction is in range but the sign may not agree 
</span><span class="decl-fun" id="fixed_frac_sign"><span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#fixed_frac_sign">fixed-frac-sign<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed<span class="dash">-</span>frac<span class="dash">-</span>sign: <span class="tp sp">(</span><span class="tp tpp">tr</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">fr</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>( <a class="pp">tr<span class="pc">tr: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a>, <a class="pp">fr<span class="pc">fr: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">tr</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#neg_ques__1">neg?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>neg?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_amp__amp_">&amp;&amp;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&amp;&amp;): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">fr<span class="pc">fr: <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#pos_ques__2">pos?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>pos?<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp" href="#con_space_Fixed"><span class="co">Fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>Fixed: <span class="tp sp">(</span><span class="tp tpp">trunc</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>(<a class="pp">tr<span class="pc">tr: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#inc">inc<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>inc: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>, <a class="pp">fr<span class="pc">fr: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_dash__2">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="#base">base<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>base: <span class="tp">double</span></span></a>)
  <span class="kw">elif</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">tr</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#pos_ques__1">pos?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>pos?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_amp__amp_">&amp;&amp;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&amp;&amp;): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">fr<span class="pc">fr: <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#neg_ques__2">neg?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>neg?<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp" href="#con_space_Fixed"><span class="co">Fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>Fixed: <span class="tp sp">(</span><span class="tp tpp">trunc</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>(<a class="pp">tr<span class="pc">tr: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#dec">dec<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>dec: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>, <a class="pp" href="#base">base<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>base: <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">fr<span class="pc">fr: <span class="tp">double</span></span></a>)
  <span class="kw">else</span> <a class="pp" href="#con_space_Fixed"><span class="co">Fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>Fixed: <span class="tp sp">(</span><span class="tp tpp">trunc</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>(<a class="pp">tr<span class="pc">tr: <span class="tp">int</span></span></a>,<a class="pp">fr<span class="pc">fr: <span class="tp">double</span></span></a>)
</span>}


<span class="comment">// Parse a &#96;:fixed&#96; point number where a dot (&#96;.&#96;) separates the factional part.
</span><span class="decl-fun" id="parse_fixed"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#parse_fixed">parse-fixed<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>parse<span class="dash">-</span>fixed: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">fixed</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_maybe"><span class="tp">maybe</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>maybe: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> {
  <span class="kw">match</span>(<a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="std_text_regex-source.html#find">find<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>find: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">matched</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="#rx_fixed">rx-fixed<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>rx<span class="dash">-</span>fixed: <span class="tp">regex</span></span></a>)) {
    <a class="pp" href="std_core-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a> <span class="kw op">-></span> <a class="pp" href="std_core-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>
    <a class="pp" href="std_core-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">cap<span class="pc">cap: <span class="tp">matched</span></span></a>) <span class="kw op">-></span> {
      <span class="kw">val</span> <a class="pp">sign<span class="pc">sign: <span class="tp">string</span></span></a>  <span class="kw">=</span> <a class="pp">cap<span class="pc">cap: <span class="tp">matched</span></span></a><span class="kw op">.</span><a class="pp" href="std_text_regex-source.html#groups">groups<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>groups: <span class="tp sp">(</span><span class="tp tpp">matched</span> <span class="tp kw op">:</span> <span class="tp">matched</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">groups</span></span></a><a class="pp" href="std_text_regex-source.html#_index_">[<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>[]: <span class="tp sp">(</span><span class="tp tpp">groups</span> <span class="tp kw op">:</span> <span class="tp">groups</span><span class="tp sp">,</span> <span class="tp tpp">index</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><span class="number">1</span>] 
      <span class="kw">val</span> <a class="pp">whole<span class="pc">whole: <span class="tp">string</span></span></a> <span class="kw">=</span> <a class="pp">cap<span class="pc">cap: <span class="tp">matched</span></span></a><span class="kw op">.</span><a class="pp" href="std_text_regex-source.html#groups">groups<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>groups: <span class="tp sp">(</span><span class="tp tpp">matched</span> <span class="tp kw op">:</span> <span class="tp">matched</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">groups</span></span></a><a class="pp" href="std_text_regex-source.html#_index_">[<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>[]: <span class="tp sp">(</span><span class="tp tpp">groups</span> <span class="tp kw op">:</span> <span class="tp">groups</span><span class="tp sp">,</span> <span class="tp tpp">index</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><span class="number">2</span>]
      <span class="kw">val</span> <a class="pp">frac<span class="pc">frac: <span class="tp">string</span></span></a>  <span class="kw">=</span> <a class="pp">cap<span class="pc">cap: <span class="tp">matched</span></span></a><span class="kw op">.</span><a class="pp" href="std_text_regex-source.html#groups">groups<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>groups: <span class="tp sp">(</span><span class="tp tpp">matched</span> <span class="tp kw op">:</span> <span class="tp">matched</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">groups</span></span></a><a class="pp" href="std_text_regex-source.html#_index_">[<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>[]: <span class="tp sp">(</span><span class="tp tpp">groups</span> <span class="tp kw op">:</span> <span class="tp">groups</span><span class="tp sp">,</span> <span class="tp tpp">index</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><span class="number">3</span>]<span class="kw op">.</span><a class="pp" href="std_core-source.html#pad_right">pad-right<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>pad<span class="dash">-</span>right: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">width</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">fill</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<a class="pp" href="#scale">scale<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>scale: <span class="tp">int</span></span></a>,<span class="st">'0'</span>)<span class="kw op">.</span><a class="pp" href="std_core-source.html#first">first<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>first: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">sslice</span></span></a>(<a class="pp" href="#scale">scale<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>scale: <span class="tp">int</span></span></a>)<span class="kw op">.</span><a class="pp" href="std_core-source.html#string_3">string<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp tpp">slice</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#trim_left_1">trim-left<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>trim<span class="dash">-</span>left<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">sub</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<span class="st">"0"</span>) <a class="pp" href="std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <span class="st">".0"</span>
      <span class="kw">val</span> <a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a>     <span class="kw">=</span> <a class="pp" href="#con_space_Fixed"><span class="co">Fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>Fixed: <span class="tp sp">(</span><span class="tp tpp">trunc</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>(<a class="pp">whole<span class="pc">whole: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#parse_int_default">parse-int-default<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>parse<span class="dash">-</span>int<span class="dash">-</span>default: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">default</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">hex</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<span class="number">0</span>),<a class="pp">frac<span class="pc">frac: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#parse_double_default">parse-double-default<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>parse<span class="dash">-</span>double<span class="dash">-</span>default: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">default</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<span class="number">0.0</span>))
      <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">sign</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp" href="std_core-source.html#_eq__eq__3">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><span class="st">"-"</span>) <span class="kw">then</span> <a class="pp" href="std_core-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a><a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a>) <span class="kw">else</span> <a class="pp" href="std_core-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a>)
    }
  }
</span>}
<span class="decl-val" id="rx_fixed"><span class="kw">val</span> <a class="pp" href="std_num_fixed.html#rx_fixed">rx-fixed<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>rx<span class="dash">-</span>fixed: <span class="tp">regex</span></span></a> <span class="kw">=</span> <a class="pp" href="std_text_regex-source.html#regex">regex<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex: <span class="tp sp">(</span><span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">ignorecase</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp tpp">multiline</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">regex</span></span></a>(<span class="st">"^([\\-\\+]?)(\\d+)(?:\\.(\\d&#42;))?$"</span></span>)

<span class="comment">// Convert a fixed point number to a double. This may lose precision.
</span><span class="decl-fun" id="double"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> (<a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#frac">frac<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>frac: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_fs__1">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="#base">base<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>base: <span class="tp">double</span></span></a>)
</span>}

<span class="comment">// Round a fixed point number to an integer.
</span><span class="decl-fun" id="int"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#int">int<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>int: <span class="tp sp">(</span><span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>( <a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> {
  <span class="kw">val</span> <a class="pp">base2<span class="pc">base2: <span class="tp">double</span></span></a>  <span class="kw">=</span> <a class="pp" href="#base">base<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>base: <span class="tp">double</span></span></a><a class="pp" href="std_core-source.html#_fs__1">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><span class="number">2.0</span>
  <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">f</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="#frac">frac<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>frac: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_lt__2">&lt;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&lt;)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_tilde__1">~<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(~)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><a class="pp">base2<span class="pc">base2: <span class="tp">double</span></span></a>) <span class="kw">then</span> <a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#dec">dec<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>dec: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <span class="kw">elif</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">f</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="#frac">frac<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>frac: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_gt__2">&gt;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&gt;)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">base2<span class="pc">base2: <span class="tp">double</span></span></a>) <span class="kw">then</span> <a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#inc">inc<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>inc: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <span class="kw">else</span> <a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
</span>}

<span class="comment">// Floor a fixed point number to an integer (i.e. round to minus infinity)
</span><span class="decl-fun" id="floor"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#floor">floor<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>floor: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">x</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#neg_ques__1">neg?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>neg?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_amp__amp_">&amp;&amp;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&amp;&amp;): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_excl_">!<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(!): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#frac">frac<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>frac: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#zero_ques__1">zero?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>zero?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#dec">dec<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>dec: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <span class="kw">else</span> <a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
</span>}

<span class="comment">// Return the 'truncated' fraction, always in the range &lt;&#96;~1.0&#96;,&#96;1.0&#96;&gt;:\
// &#96;x.trunc.fixed + x.fraction == x&#96;
</span><span class="decl-fun" id="fraction"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#fraction">fraction<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fraction: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#frac">frac<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>frac: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_fs__1">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="#base">base<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>base: <span class="tp">double</span></span></a>
</span>}

<span class="comment">// Return the 'floored' fraction, always in the range [&#96;0&#96;,&#96;1.0&#96;&gt;:\
// &#96;x.floor.fixed + x.ffraction == x&#96; 
</span><span class="decl-fun" id="ffraction"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#ffraction">ffraction<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>ffraction: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">x</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#neg_ques__1">neg?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>neg?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_amp__amp_">&amp;&amp;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&amp;&amp;): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_excl_">!<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(!): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#frac">frac<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>frac: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#zero_ques__1">zero?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>zero?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#fraction">fraction<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fraction: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <span class="number">1.0</span> <span class="kw">else</span> <a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#fraction">fraction<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fraction: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>
</span>}


<span class="comment">// Round a fixed point number to a specified precision of digits after the dot.
</span><span class="decl-fun" id="round_to_prec"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#round_to_prec">round-to-prec<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>round<span class="dash">-</span>to<span class="dash">-</span>prec: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a>, <a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">!</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#pos_ques__1">pos?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>pos?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#round">round<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>round: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a> 
  <span class="kw">elif</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">prec</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_gt__eq__1">&gt;=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&gt;=)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="#scale">scale<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>scale: <span class="tp">int</span></span></a>) <span class="kw">then</span> <a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a> 
  <span class="kw">else</span> {
    <span class="kw">val</span> <a class="pp">p<span class="pc">p: <span class="tp">double</span></span></a> <span class="kw">=</span> <a class="pp" href="std_core-source.html#pow10_1">pow10<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>pow10<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( (<a class="pp" href="#scale">scale<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>scale: <span class="tp">int</span></span></a> <a class="pp" href="std_core-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a>)<span class="kw op">.</span><a class="pp" href="std_core-source.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> )
    <span class="kw">val</span> <a class="pp">f<span class="pc">f: <span class="tp">double</span></span></a>  <span class="kw">=</span> (<a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#frac">frac<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>frac: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_fs__1">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">p<span class="pc">p: <span class="tp">double</span></span></a>)<span class="kw op">.</span><a class="pp" href="std_core-source.html#round">round<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>round: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">p<span class="pc">p: <span class="tp">double</span></span></a>
    <a class="pp" href="#fixed_frac_ovf">fixed-frac-ovf<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed<span class="dash">-</span>frac<span class="dash">-</span>ovf: <span class="tp sp">(</span><span class="tp tpp">tr</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">fr</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>,<a class="pp">f<span class="pc">f: <span class="tp">double</span></span></a>)
  }  
</span>}

<span class="comment">// Round a fixed point number to a whole integer.
</span><span class="decl-fun" id="round"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#round">round<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>round: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> {
  <a class="pp" href="#con_space_Fixed"><span class="co">Fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>Fixed: <span class="tp sp">(</span><span class="tp tpp">trunc</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#int">int<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>int: <span class="tp sp">(</span><span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>,<span class="number">0.0</span>)
</span>}


<span class="comment">// Show a fixed point number rounded to a specified maximum precision (&#96;max-prec&#96;, =&#96;15&#96;), 
// showing at most &#96;prec&#96; digits after the dot (=&#96;~1&#96;). Use a negative number to use the 
// minimal digits to show the required precision.
</span><span class="decl-fun" id="show"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#show">show<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>show: <span class="tp sp">(</span><span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>( <a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a>, <a class="pp">prec<span class="pc">prec: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="std_core-source.html#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="number">1</span> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> {
  <span class="comment">// trace("show: " + f.trunc.show + " + " + f.frac.show-fixed)
</span>  <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">prec</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#zero_ques_">zero?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>zero?: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_bar__bar_">||<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(||): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#frac">frac<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>frac: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#zero_ques__1">zero?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>zero?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp"><span class="kw">return</span><span class="pc">return: <span class="tp">string</span></span></a> <a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#int">int<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>int: <span class="tp sp">(</span><span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#show_1">show<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>show<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>
  <span class="kw">val</span> <a class="pp">fp<span class="pc">fp: <span class="tp">fixed</span></span></a> <span class="kw">=</span> <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">prec</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#pos_ques__1">pos?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>pos?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#round_to_prec">round-to-prec<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>round<span class="dash">-</span>to<span class="dash">-</span>prec: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>(<a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a>) <span class="kw">else</span> <a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a>
  <span class="kw">val</span> <a class="pp">fr<span class="pc">fr: <span class="tp">string</span></span></a> <span class="kw">=</span> <a class="pp">fp<span class="pc">fp: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#frac">frac<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>frac: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#abs_1">abs<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>abs<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#show_fixed">show-fixed<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>show<span class="dash">-</span>fixed: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">precision</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<a class="pp" href="#scale">scale<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>scale: <span class="tp">int</span></span></a>)<span class="kw op">.</span><a class="pp" href="std_core-source.html#last_2">last<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>last<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">sslice</span></span></a>(<span class="number">2</span>)<span class="kw op">.</span><a class="pp" href="std_core-source.html#before">before<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>before: <span class="tp sp">(</span><span class="tp tpp">slice</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">sslice</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#string_3">string<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp tpp">slice</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>
  <span class="kw">val</span> <a class="pp">sign<span class="pc">sign: <span class="tp">string</span></span></a> <span class="kw">=</span> <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">fp</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="#neg_ques_">neg?<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>neg?: <span class="tp sp">(</span><span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <span class="st">"-"</span> <span class="kw">else</span> <span class="st">""</span>
  <span class="kw">val</span> <a class="pp">frac<span class="pc">frac: <span class="tp">string</span></span></a> <span class="kw">=</span> <a class="pp">fr<span class="pc">fr: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#pad_left">pad-left<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>pad<span class="dash">-</span>left: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">width</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">fill</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">char</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<a class="pp" href="#scale">scale<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>scale: <span class="tp">int</span></span></a>,<span class="st">'0'</span>)<span class="kw op">.</span><a class="pp" href="std_core-source.html#trim_right_1">trim-right<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>trim<span class="dash">-</span>right<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">sub</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<span class="st">"0"</span>)  
  <a class="pp">sign<span class="pc">sign: <span class="tp">string</span></span></a> <a class="pp" href="std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">fp<span class="pc">fp: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#abs">abs<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>abs: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#show_1">show<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>show<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp" href="std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> (<span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">frac</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#empty_ques__1">empty?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>empty?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <span class="st">""</span> <span class="kw">else</span> <span class="st">"."</span> <a class="pp" href="std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">frac<span class="pc">frac: <span class="tp">string</span></span></a>)
</span>}



<span class="comment">// Is a fixed point number negative?
</span><span class="decl-fun" id="neg_ques_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#neg_ques_">neg?<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>neg?: <span class="tp sp">(</span><span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a>  { <a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#neg_ques__1">neg?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>neg?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_bar__bar_">||<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(||): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#frac">frac<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>frac: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#neg_ques__2">neg?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>neg?<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> </span>}

<span class="comment">// Is a fixed point number positive?
</span><span class="decl-fun" id="pos_ques_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#pos_ques_">pos?<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>pos?: <span class="tp sp">(</span><span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a>  { <a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#pos_ques__1">pos?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>pos?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_bar__bar_">||<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(||): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#frac">frac<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>frac: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#pos_ques__2">pos?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>pos?<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> </span>}

<span class="comment">// Is a fixed point number zero?
</span><span class="decl-fun" id="zero_ques_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#zero_ques_">zero?<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>zero?: <span class="tp sp">(</span><span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> { <a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#zero_ques_">zero?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>zero?: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_amp__amp_">&amp;&amp;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&amp;&amp;): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#frac">frac<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>frac: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#zero_ques__1">zero?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>zero?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> </span>}

<span class="comment">// Compare two fixed point numbers.
</span><span class="decl-fun" id="compare"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp tpp">q1</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">,</span> <span class="tp tpp">q2</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>( <a class="pp">q1<span class="pc">q1: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a>, <a class="pp">q2<span class="pc">q2: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_order"><span class="tp">order</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>order: <span class="tp">V</span></span></a> {
  <span class="kw">match</span>(<a class="pp" href="std_core-source.html#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">q1<span class="pc">q1: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>,<a class="pp">q2<span class="pc">q2: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>)) {
    <a class="pp" href="std_core-source.html#con_space_Eq"><span class="co">Eq</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Eq: <span class="tp">order</span></span></a>  <span class="kw op">-></span> <a class="pp" href="std_core-source.html#compare_3">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>compare<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">q1<span class="pc">q1: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#frac">frac<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>frac: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>,<a class="pp">q2<span class="pc">q2: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#frac">frac<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>frac: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>)
    <a class="pp">ord<span class="pc">ord: <span class="tp">order</span></span></a> <span class="kw op">-></span> <a class="pp">ord<span class="pc">ord: <span class="tp">order</span></span></a>
  }
</span>}

<span class="decl-fun" id="_gt_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#_gt_">(&gt;)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>(&gt;): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> (<a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> { <a class="pp" href="#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp tpp">q1</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">,</span> <span class="tp tpp">q2</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a>,<a class="pp">y<span class="pc">y: <span class="tp">fixed</span></span></a>) <a class="pp" href="std_core-source.html#_eq__eq__4">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==)<span class="postfix">.4</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#con_space_Gt"><span class="co">Gt</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Gt: <span class="tp">order</span></span></a> </span>}
<span class="decl-fun" id="_gt__eq_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#_gt__eq_">(&gt;=)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>(&gt;=): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> { <a class="pp" href="#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp tpp">q1</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">,</span> <span class="tp tpp">q2</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a>,<a class="pp">y<span class="pc">y: <span class="tp">fixed</span></span></a>) <a class="pp" href="std_core-source.html#_excl__eq__4">!=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(!=)<span class="postfix">.4</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#con_space_Lt"><span class="co">Lt</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Lt: <span class="tp">order</span></span></a> </span>}
<span class="decl-fun" id="_eq__eq_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#_eq__eq_">(==)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>(==): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> { <a class="pp" href="#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp tpp">q1</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">,</span> <span class="tp tpp">q2</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a>,<a class="pp">y<span class="pc">y: <span class="tp">fixed</span></span></a>) <a class="pp" href="std_core-source.html#_eq__eq__4">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==)<span class="postfix">.4</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#con_space_Eq"><span class="co">Eq</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Eq: <span class="tp">order</span></span></a> </span>}
<span class="decl-fun" id="_excl__eq_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#_excl__eq_">(!=)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>(!=): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> { <a class="pp" href="#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp tpp">q1</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">,</span> <span class="tp tpp">q2</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a>,<a class="pp">y<span class="pc">y: <span class="tp">fixed</span></span></a>) <a class="pp" href="std_core-source.html#_excl__eq__4">!=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(!=)<span class="postfix">.4</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#con_space_Eq"><span class="co">Eq</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Eq: <span class="tp">order</span></span></a> </span>}
<span class="decl-fun" id="_lt_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#_lt_">(&lt;)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>(&lt;): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> (<a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> { <a class="pp" href="#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp tpp">q1</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">,</span> <span class="tp tpp">q2</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a>,<a class="pp">y<span class="pc">y: <span class="tp">fixed</span></span></a>) <a class="pp" href="std_core-source.html#_eq__eq__4">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==)<span class="postfix">.4</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#con_space_Lt"><span class="co">Lt</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Lt: <span class="tp">order</span></span></a> </span>}
<span class="decl-fun" id="_lt__eq_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#_lt__eq_">(&lt;=)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>(&lt;=): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> { <a class="pp" href="#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp tpp">q1</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">,</span> <span class="tp tpp">q2</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a>,<a class="pp">y<span class="pc">y: <span class="tp">fixed</span></span></a>) <a class="pp" href="std_core-source.html#_excl__eq__4">!=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(!=)<span class="postfix">.4</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#con_space_Gt"><span class="co">Gt</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Gt: <span class="tp">order</span></span></a> </span>}

<span class="comment">// Negate a &#96;:fixed&#96; point number.
</span><span class="decl-fun" id="_tilde_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#_tilde_">(~)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>( <a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> {
  <a class="pp" href="#con_space_Fixed"><span class="co">Fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>Fixed: <span class="tp sp">(</span><span class="tp tpp">trunc</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>(<a class="pp" href="std_core-source.html#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>,<a class="pp" href="std_core-source.html#_tilde__1">~<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(~)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#frac">frac<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>frac: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>)
</span>}

<span class="comment">// The absolute value of a fixed number
</span><span class="decl-fun" id="abs"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#abs">abs<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>abs: <span class="tp sp">(</span><span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>( <a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">f</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="#neg_ques_">neg?<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>neg?: <span class="tp sp">(</span><span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp" href="#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a><a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a> <span class="kw">else</span> <a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a>
</span>}

<span class="comment">// Add two fixed point numbers.
</span><span class="decl-fun" id="_plus_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#_plus_">(+)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> {
  <a class="pp" href="#fixed_frac_ovf">fixed-frac-ovf<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed<span class="dash">-</span>frac<span class="dash">-</span>ovf: <span class="tp sp">(</span><span class="tp tpp">tr</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">fr</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="std_core-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">y<span class="pc">y: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>, <a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#frac">frac<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>frac: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">y<span class="pc">y: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#frac">frac<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>frac: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>)
</span>}

<span class="comment">// Subtract two fixed point numbers.
</span><span class="decl-fun" id="_dash_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#_dash_">(-)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> {
  <a class="pp" href="#fixed_frac_ovf">fixed-frac-ovf<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed<span class="dash">-</span>frac<span class="dash">-</span>ovf: <span class="tp sp">(</span><span class="tp tpp">tr</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">fr</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="std_core-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">y<span class="pc">y: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>, <a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#frac">frac<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>frac: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_dash__2">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">y<span class="pc">y: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#frac">frac<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>frac: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> )
</span>}

<span class="comment">// Take the sum of a list of fixed point numbers (0 for the empty list).
</span><span class="decl-fun" id="sum"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#sum">sum<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>sum: <span class="tp sp">(</span><span class="tp tpp">fs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">fixed</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>( <a class="pp">fs<span class="pc">fs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">fixed</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> {
  <a class="pp">fs<span class="pc">fs: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">fixed</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#foldr">foldr<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>foldr: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">z</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span></span></a>(<a class="pp" href="#zero">zero<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>zero: <span class="tp">fixed</span></span></a>,<a class="pp" href="#_plus_">(+)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>)
</span>}

<span class="decl-fun" id="expand"><span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#expand">expand<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>expand: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space__lp__comma__rp_"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp sp">(</span><span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><a class="pp" href="std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a><span class="tp sp">,</span> <a class="pp" href="std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> <a class="pp" href="std_core-source.html#type_space__lp__comma__rp_"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp sp">(</span><span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">x</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="#frac">frac<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>frac: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#zero_ques__1">zero?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>zero?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <a class="pp"><span class="kw">return</span><span class="pc">return: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span></span></a> <a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>,<span class="number">0</span><a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a>
  <span class="kw">val</span> <a class="pp">fi<span class="pc">fi: <span class="tp">int</span></span></a> <span class="kw">=</span> <a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#frac">frac<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>frac: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#int_2">int<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
  <span class="kw">val</span> <a class="pp">p<span class="pc">p: <span class="tp">int</span></span></a> <span class="kw">=</span> <a class="pp">fi<span class="pc">fi: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#pow10_ques_">pow10?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>pow10?: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
  <span class="kw">val</span> <a class="pp">f<span class="pc">f: <span class="tp">int</span></span></a> <span class="kw">=</span> <a class="pp">fi<span class="pc">fi: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#cdiv_pow10">cdiv-pow10<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>cdiv<span class="dash">-</span>pow10: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">p<span class="pc">p: <span class="tp">int</span></span></a>)
  <span class="comment">//trace("expand: " + x.show + ", f: " + f.show + ", p:" + p.show )
</span>  <a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#mul_pow10">mul-pow10<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>mul<span class="dash">-</span>pow10: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp" href="#scale">scale<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>scale: <span class="tp">int</span></span></a> <a class="pp" href="std_core-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">p<span class="pc">p: <span class="tp">int</span></span></a>) <a class="pp" href="std_core-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">f<span class="pc">f: <span class="tp">int</span></span></a>, <a class="pp" href="#scale">scale<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>scale: <span class="tp">int</span></span></a> <a class="pp" href="std_core-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">p<span class="pc">p: <span class="tp">int</span></span></a><a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a>
</span>}



<span class="comment">// Multiply two &#96;:fixed&#96; numbers.
</span><span class="decl-fun" id="_star_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#_star_">(&#42;)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>(&#42;): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> {
  <span class="comment">// trace("mul: " + x.show + " &#42; " + y.show)
</span>  <span class="kw">val</span> <a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">xx<span class="pc">xx: <span class="tp">int</span></span></a>,<a class="pp">px<span class="pc">px: <span class="tp">int</span></span></a><a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a> <span class="kw">=</span> <a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#expand">expand<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>expand: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span></span></a>
  <span class="kw">val</span> <a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">yy<span class="pc">yy: <span class="tp">int</span></span></a>,<a class="pp">py<span class="pc">py: <span class="tp">int</span></span></a><a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a> <span class="kw">=</span> <a class="pp">y<span class="pc">y: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#expand">expand<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>expand: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span></span></a>
  <a class="pp" href="#fixed">fixed<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>( <a class="pp">xx<span class="pc">xx: <span class="tp">int</span></span></a><a class="pp" href="std_core-source.html#_star_">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><a class="pp">yy<span class="pc">yy: <span class="tp">int</span></span></a>, <a class="pp">px<span class="pc">px: <span class="tp">int</span></span></a> <a class="pp" href="std_core-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">py<span class="pc">py: <span class="tp">int</span></span></a> )
</span>}


<span class="decl-val" id="maxpd"><span class="kw">val</span> <a class="pp" href="std_num_fixed.html#maxpd">maxpd<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>maxpd: <span class="tp">double</span></span></a>      <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="number">1.0e15</span></span>
<span class="decl-val" id="maxprecise"><span class="kw">val</span> <a class="pp" href="std_num_fixed.html#maxprecise">maxprecise<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>maxprecise: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="std_core-source.html#int_2">int<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp" href="#maxpd">maxpd<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>maxpd: <span class="tp">double</span></span></a></span>)
<span class="decl-val" id="minprecise"><span class="kw">val</span> <a class="pp" href="std_num_fixed.html#minprecise">minprecise<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>minprecise: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="std_core-source.html#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><a class="pp" href="#maxprecise">maxprecise<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>maxprecise: <span class="tp">int</span></span></a></span>

<span class="decl-fun" id="precise_ques_"><span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#precise_ques_">precise?<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>precise?: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> {
  (<a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a> <a class="pp" href="std_core-source.html#_gt__1">&gt;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&gt;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="#minprecise">minprecise<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>minprecise: <span class="tp">int</span></span></a> <a class="pp" href="std_core-source.html#_amp__amp_">&amp;&amp;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&amp;&amp;): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a> <a class="pp" href="std_core-source.html#_lt__1">&lt;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&lt;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="#maxprecise">maxprecise<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>maxprecise: <span class="tp">int</span></span></a>)
</span>}


<span class="comment">// Divide two &#96;:fixed&#96; numbers.
</span><span class="decl-fun" id="_fs_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#_fs_">(/)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>(<span class="fslash">/</span>): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> {
  <span class="comment">// trace("div: " + x.show + " / " + y.show)  
</span>  <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">x</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="#frac">frac<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>frac: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#zero_ques__1">zero?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>zero?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_amp__amp_">&amp;&amp;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&amp;&amp;): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">y<span class="pc">y: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#frac">frac<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>frac: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#zero_ques__1">zero?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>zero?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_amp__amp_">&amp;&amp;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&amp;&amp;): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="#precise_ques_">precise?<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>precise?: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="std_core-source.html#_amp__amp_">&amp;&amp;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&amp;&amp;): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">y<span class="pc">y: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="#precise_ques_">precise?<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>precise?: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) {
    <a class="pp" href="#fixed_1">fixed<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="std_core-source.html#_fs__1">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">y<span class="pc">y: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>)
  }
  <span class="kw">else</span> {
    <span class="kw">val</span> <a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">yy<span class="pc">yy: <span class="tp">int</span></span></a>,<a class="pp">py<span class="pc">py: <span class="tp">int</span></span></a><a class="pp" href="std_core-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a> <span class="kw">=</span> <a class="pp">y<span class="pc">y: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#expand">expand<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>expand: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span></span></a>
    <span class="kw">val</span> <a class="pp">xx<span class="pc">xx: <span class="tp">int</span></span></a> <span class="kw">=</span> <a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#mul_pow10">mul-pow10<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>mul<span class="dash">-</span>pow10: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp" href="#scale">scale<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>scale: <span class="tp">int</span></span></a> <a class="pp" href="std_core-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">py<span class="pc">py: <span class="tp">int</span></span></a>) <a class="pp" href="std_core-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a><span class="kw op">.</span><a class="pp" href="#frac">frac<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>frac: <span class="tp sp">(</span><span class="tp tpp">fixed</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#int_2">int<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="std_core-source.html#mul_pow10">mul-pow10<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>mul<span class="dash">-</span>pow10: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">py<span class="pc">py: <span class="tp">int</span></span></a>)
    <a class="pp" href="#fixed">fixed<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>( <a class="pp">xx<span class="pc">xx: <span class="tp">int</span></span></a> <a class="pp" href="std_core-source.html#_fs_">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">yy<span class="pc">yy: <span class="tp">int</span></span></a>, <a class="pp" href="#scale">scale<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>scale: <span class="tp">int</span></span></a> )
  }
</span>}


<span class="comment">// The sign of a fixed point number.
</span><span class="decl-fun" id="sign"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#sign">sign<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>sign: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="std_core-source.html#type_space_order"><span class="tp">order</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>order: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">x</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="#neg_ques_">neg?<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>neg?: <span class="tp sp">(</span><span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp" href="std_core-source.html#con_space_Lt"><span class="co">Lt</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Lt: <span class="tp">order</span></span></a>
  <span class="kw">elif</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">x</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="#zero_ques_">zero?<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>zero?: <span class="tp sp">(</span><span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp" href="std_core-source.html#con_space_Eq"><span class="co">Eq</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Eq: <span class="tp">order</span></span></a>
  <span class="kw">else</span> <a class="pp" href="std_core-source.html#con_space_Gt"><span class="co">Gt</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Gt: <span class="tp">order</span></span></a>
</span>}

<span class="comment">// Increment a fixed point number.
</span><span class="decl-fun" id="inc"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#inc">inc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>inc: <span class="tp sp">(</span><span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>( <a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a>  <span class="tp kw op">-></span> <a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a> <a class="pp" href="#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a> <a class="pp" href="#fixed">fixed<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>(<span class="number">1</span></span>)

<span class="comment">// Decrement a fixed point number
</span><span class="decl-fun" id="dec"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#dec">dec<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>dec: <span class="tp sp">(</span><span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>( <a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a>  <span class="tp kw op">-></span> <a class="pp">f<span class="pc">f: <span class="tp">fixed</span></span></a> <a class="pp" href="#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a> <a class="pp" href="#fixed">fixed<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>(<span class="number">1</span></span>)

<span class="comment">// The minimum of &#96;x&#96; and &#96;y&#96;.
</span><span class="decl-fun" id="min"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#min">min<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>min: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">x</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a> <a class="pp" href="#_lt__eq_">&lt;=<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>(&lt;=): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">y<span class="pc">y: <span class="tp">fixed</span></span></a>) <span class="kw">then</span> <a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a> <span class="kw">else</span> <a class="pp">y<span class="pc">y: <span class="tp">fixed</span></span></a>
</span>}

<span class="comment">// The maximum of &#96;x&#96; and &#96;y&#96;
</span><span class="decl-fun" id="max"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="std_num_fixed.html#max">max<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>max: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">fixed</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">fixed</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_fixed"><span class="tp">fixed</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>fixed: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="std_core-source.html#con_space_True"><span class="co">x</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a> <a class="pp" href="#_gt__eq_">&gt;=<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>(&gt;=): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">y<span class="pc">y: <span class="tp">fixed</span></span></a>) <span class="kw">then</span> <a class="pp">x<span class="pc">x: <span class="tp">fixed</span></span></a> <span class="kw">else</span> <a class="pp">y<span class="pc">y: <span class="tp">fixed</span></span></a>
</span>}
</pre>

</div></body>
</html>
