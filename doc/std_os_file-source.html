<!DOCTYPE html>
<html>
<!-- NO_CLICK_TRACKING -->

<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />

<style type="text/css">.koka .plaincode, .koka a.pp .pc { display: none; } .koka a.pp { color: inherit; text-decoration: none; }</style>
<link rel="stylesheet" type="text/css" href="styles/madoko.css" />
<link rel="stylesheet" type="text/css" href="styles/koka.css" />

<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Noto+Serif:400,400italic,700,700italic" />
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700,400italic" />

<title>file.kk documentation</title>
</head>

<body class="koka doc body"><div class="madoko">
<pre class="koka source"><span class="comment">/&#42;---------------------------------------------------------------------------
    Copyright 2012 Microsoft Corporation.
 
  This is free software; you can redistribute it and/or modify it under the
  terms of the Apache License, Version 2.0. A copy of the License can be
  found in the file "license.txt" at the root of this distribution.
---------------------------------------------------------------------------&#42;/</span>


<span class="comment">/&#42; File operations. 
&#42;/</span>
<span class="kw">public</span> <span class="kw">module</span> file

<span class="kw">import</span> path
<span class="kw">import</span> fixed
<span class="kw">import</span> duration
<span class="kw">import</span> instant
<span class="kw">import</span> utc


<span class="kw">extern</span> include {
  js file <span class="st">"file-inline.js"</span>
}

<span class="comment">// Read a text file (using UTF8 encoding) asynchronously
</span><span class="decl-fun" id="read_text_file"><span class="kw">extern</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_file.html#read_text_file">read-text-file<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>read<span class="dash">-</span>text<span class="dash">-</span>file: <span class="tp sp">(</span><span class="tp tpp">fname</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">async</span><span class="tp sp">&gt;</span> <span class="tp">string</span></span></a>( <a class="pp">fname<span class="pc">fname: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space__lt__gt_"><span class="tp"><span class="effect">&lt;</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&lt;&gt;): <span class="tp">E</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_async"><span class="tp">async</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>async: <span class="tp">HX</span></span></a><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_exn"><span class="tp"><span class="effect">exn</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="tp">X</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> {
  js inline <span class="st">"(function(){ fs.readFile(fname,'utf8', $std&#95;core.&#95;async&#95;callback&#95;err1(&#95;k)); return $std&#95;core.async&#95;yield(); })()"</span>
</span>}

<span class="comment">// Try to read a text file; return a default value in case of an error.
</span><span class="decl-fun" id="try_read_text_file_syncdef"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_file.html#try_read_text_file_syncdef">try-read-text-file-syncdef<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>try<span class="dash">-</span>read<span class="dash">-</span>text<span class="dash">-</span>file<span class="dash">-</span>syncdef: <span class="tp sp">(</span><span class="tp tpp">fileName</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">def</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">io</span> <span class="tp">string</span></span></a>( <a class="pp">fileName<span class="pc">fileName: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>, <a class="pp">def<span class="pc">def: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_io"><span class="tp"><span class="effect">io</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>io: <span class="tp">E</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> {
  <span class="kw">match</span> (<a class="pp">fileName<span class="pc">fileName: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="#try_read_text_file_sync">try-read-text-file-sync<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>try<span class="dash">-</span>read<span class="dash">-</span>text<span class="dash">-</span>file<span class="dash">-</span>sync: <span class="tp sp">(</span><span class="tp tpp">fileName</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">io</span> <span class="tp">either</span><span class="tp sp">&lt;</span><span class="tp">exception</span><span class="tp sp">,</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a>()) {
    <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Left"><span class="co">Left</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Left: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">left</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">either</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span></span></a>(&#95;exn) <span class="kw op">-></span> <a class="pp">def<span class="pc">def: <span class="tp">string</span></span></a>
    <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Right"><span class="co">Right</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Right: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">right</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">either</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">content<span class="pc">content: <span class="tp">string</span></span></a>) <span class="kw op">-></span> <a class="pp">content<span class="pc">content: <span class="tp">string</span></span></a>
  }
</span>}

<span class="comment">// Try to a text file synchronously (using UTF8 encoding)
</span><span class="decl-fun" id="try_read_text_file_sync"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_file.html#try_read_text_file_sync">try-read-text-file-sync<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>try<span class="dash">-</span>read<span class="dash">-</span>text<span class="dash">-</span>file<span class="dash">-</span>sync: <span class="tp sp">(</span><span class="tp tpp">fileName</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">io</span> <span class="tp">either</span><span class="tp sp">&lt;</span><span class="tp">exception</span><span class="tp sp">,</span><span class="tp">string</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">fileName<span class="pc">fileName: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_io"><span class="tp"><span class="effect">io</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>io: <span class="tp">E</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_either"><span class="tp">either</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>either: <span class="tp sp">(</span><span class="tp">V</span><span class="tp sp">,</span> <span class="tp">V</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_exception"><span class="tp">exception</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exception: <span class="tp">V</span></span></a><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> 
{
  <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#catch">catch<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>catch: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">hndl</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">exception</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">a</span></span></a>( { <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Right"><span class="co">Right</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Right: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">right</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">either</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="#read_text_file_sync">read-text-file-sync<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>read<span class="dash">-</span>text<span class="dash">-</span>file<span class="dash">-</span>sync: <span class="tp sp">(</span><span class="tp tpp">fileName</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">io</span> <span class="tp">string</span></span></a>(<a class="pp">fileName<span class="pc">fileName: <span class="tp">string</span></span></a>)) }, <span class="kw">fun</span>(<a class="pp">exn<span class="pc">exn: <span class="tp">exception</span></span></a>) { <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Left"><span class="co">Left</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Left: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">left</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">either</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">exn<span class="pc">exn: <span class="tp">exception</span></span></a>) }) 
</span>}

<span class="comment">// Read a text file synchronously (using UTF8 encoding)
</span><span class="decl-fun" id="read_text_file_sync"><span class="kw">public</span> <span class="kw">extern</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_file.html#read_text_file_sync">read-text-file-sync<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>read<span class="dash">-</span>text<span class="dash">-</span>file<span class="dash">-</span>sync: <span class="tp sp">(</span><span class="tp tpp">fileName</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">io</span> <span class="tp">string</span></span></a>( <a class="pp">fileName<span class="pc">fileName: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_io"><span class="tp"><span class="effect">io</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>io: <span class="tp">E</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>
{
  cs inline <span class="st">"System.IO.File.ReadAllText(#1,System.Text.Encoding.UTF8)"</span>
  js inline <span class="st">"fs.readFileSync(#1,{encoding: 'utf8'})"</span>
</span>}

<span class="comment">// Try to write a text file synchronously (using UTF8 encoding). 
// Returns &#96;True&#96; if successful.
</span><span class="decl-fun" id="try_write_text_file"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_file.html#try_write_text_file">try-write-text-file<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>try<span class="dash">-</span>write<span class="dash">-</span>text<span class="dash">-</span>file: <span class="tp sp">(</span><span class="tp tpp">fileName</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">content</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">io</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">exception</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">fileName<span class="pc">fileName: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>, <a class="pp">content<span class="pc">content: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> )  <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_io"><span class="tp"><span class="effect">io</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>io: <span class="tp">E</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_maybe"><span class="tp">maybe</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>maybe: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_exception"><span class="tp">exception</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exception: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span>
{
  <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#catch">catch<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>catch: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">e</span><span class="tp sp">,</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">hndl</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp">exception</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">a</span></span></a>( { <a class="pp" href="#write_text_file_sync">write-text-file-sync<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>write<span class="dash">-</span>text<span class="dash">-</span>file<span class="dash">-</span>sync: <span class="tp sp">(</span><span class="tp tpp">fileName</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">content</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">io</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>(<a class="pp">fileName<span class="pc">fileName: <span class="tp">string</span></span></a>,<a class="pp">content<span class="pc">content: <span class="tp">string</span></span></a>); <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a> }, <span class="kw">fun</span>(<a class="pp">exn<span class="pc">exn: <span class="tp">exception</span></span></a>) { <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">exn<span class="pc">exn: <span class="tp">exception</span></span></a>) } )
</span>}

<span class="comment">// Write a text file synchronously (using UTF8 encoding)
</span><span class="decl-fun" id="write_text_file_sync"><span class="kw">extern</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_file.html#write_text_file_sync">write-text-file-sync<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>write<span class="dash">-</span>text<span class="dash">-</span>file<span class="dash">-</span>sync: <span class="tp sp">(</span><span class="tp tpp">fileName</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">content</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">io</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>( <a class="pp">fileName<span class="pc">fileName: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>, <a class="pp">content<span class="pc">content: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> )  <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_io"><span class="tp"><span class="effect">io</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>io: <span class="tp">E</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space__lp__rp_"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space__lp__rp_"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a> {
  cs inline <span class="st">"System.IO.File.WriteAllText(#1,#2,System.Text.Encoding.UTF8)"</span>
  js inline <span class="st">"fs.writeFileSync(#1,#2,{encoding: 'utf8'})"</span>
</span>}

<span class="decl-fun" id="utimes"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_file.html#utimes">utimes<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>utimes: <span class="tp sp">(</span><span class="tp tpp">fname</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">,</span> <span class="tp tpp">atime</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">,</span> <span class="tp tpp">mtime</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">async</span><span class="tp sp">,</span><span class="tp">file</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>( <a class="pp">fname<span class="pc">fname: <span class="tp">path</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_path-source.html#type_space_path"><span class="tp">path</span><span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>path: <span class="tp">V</span></span></a>, <a class="pp">atime<span class="pc">atime: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_instant-source.html#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="tp">V</span></span></a>, <a class="pp">mtime<span class="pc">mtime: <span class="tp">instant</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_instant-source.html#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space__lt__gt_"><span class="tp"><span class="effect">&lt;</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&lt;&gt;): <span class="tp">E</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_async"><span class="tp">async</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>async: <span class="tp">HX</span></span></a><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_file"><span class="tp"><span class="effect">file</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>file: <span class="tp">X</span></span></a><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_exn"><span class="tp"><span class="effect">exn</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="tp">X</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space__lp__rp_"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space__lp__rp_"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a> {
  <a class="pp" href="#xfile_utimes">xfile-utimes<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>xfile<span class="dash">-</span>utimes: <span class="tp sp">(</span><span class="tp tpp">fname</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">atime</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">mtime</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">async</span><span class="tp sp">,</span><span class="tp">file</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>( <a class="pp">fname<span class="pc">fname: <span class="tp">path</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_path-source.html#string">string<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>string: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>, <a class="pp">atime<span class="pc">atime: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_utc-source.html#unix_timestamp">unix-timestamp<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>utc<span class="fslash last">/</span></span>unix<span class="dash">-</span>timestamp: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><span class="number">1000.0</span>, <a class="pp">mtime<span class="pc">mtime: <span class="tp">instant</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_utc-source.html#unix_timestamp">unix-timestamp<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>utc<span class="fslash last">/</span></span>unix<span class="dash">-</span>timestamp: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">instant</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><span class="number">1000.0</span> )
</span>}

<span class="decl-fun" id="xfile_utimes"><span class="kw">extern</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_file.html#xfile_utimes">xfile-utimes<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>xfile<span class="dash">-</span>utimes: <span class="tp sp">(</span><span class="tp tpp">fname</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">atime</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">mtime</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">async</span><span class="tp sp">,</span><span class="tp">file</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>( <a class="pp">fname<span class="pc">fname: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>, <a class="pp">atime<span class="pc">atime: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a>, <a class="pp">mtime<span class="pc">mtime: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space__lt__gt_"><span class="tp"><span class="effect">&lt;</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&lt;&gt;): <span class="tp">E</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_async"><span class="tp">async</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>async: <span class="tp">HX</span></span></a><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_file"><span class="tp"><span class="effect">file</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>file: <span class="tp">X</span></span></a><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_exn"><span class="tp"><span class="effect">exn</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="tp">X</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space__lp__rp_"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space__lp__rp_"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a> {
  js inline <span class="st">"&#95;file&#95;utimes(fname, atime, mtime, &#95;k)"</span>  
</span>}

<span class="decl-fun" id="mod_time"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_file.html#mod_time">mod-time<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>mod<span class="dash">-</span>time: <span class="tp sp">(</span><span class="tp tpp">fname</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">async</span><span class="tp sp">,</span><span class="tp">file</span><span class="tp sp">&gt;</span> <span class="tp">instant</span></span></a>( <a class="pp">fname<span class="pc">fname: <span class="tp">path</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_path-source.html#type_space_path"><span class="tp">path</span><span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>path: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space__lt__gt_"><span class="tp"><span class="effect">&lt;</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&lt;&gt;): <span class="tp">E</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_async"><span class="tp">async</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>async: <span class="tp">HX</span></span></a><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_file"><span class="tp"><span class="effect">file</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>file: <span class="tp">X</span></span></a><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_exn"><span class="tp"><span class="effect">exn</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="tp">X</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_instant-source.html#type_space_instant"><span class="tp">instant</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>instant<span class="fslash last">/</span></span>instant: <span class="tp">V</span></span></a> {
  <a class="pp" href="#xfile_mod_time">xfile-mod-time<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>xfile<span class="dash">-</span>mod<span class="dash">-</span>time: <span class="tp sp">(</span><span class="tp tpp">fname</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">async</span><span class="tp sp">,</span><span class="tp">file</span><span class="tp sp">&gt;</span> <span class="tp">double</span></span></a>( <a class="pp">fname<span class="pc">fname: <span class="tp">path</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_path-source.html#string">string<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>string: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> )<span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_utc-source.html#unix_instant">unix-instant<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>utc<span class="fslash last">/</span></span>unix<span class="dash">-</span>instant: <span class="tp sp">(</span><span class="tp tpp">secs</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">instant</span></span></a>
</span>}

<span class="decl-fun" id="xfile_mod_time"><span class="kw">extern</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_file.html#xfile_mod_time">xfile-mod-time<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>xfile<span class="dash">-</span>mod<span class="dash">-</span>time: <span class="tp sp">(</span><span class="tp tpp">fname</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">async</span><span class="tp sp">,</span><span class="tp">file</span><span class="tp sp">&gt;</span> <span class="tp">double</span></span></a>( <a class="pp">fname<span class="pc">fname: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space__lt__gt_"><span class="tp"><span class="effect">&lt;</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&lt;&gt;): <span class="tp">E</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_async"><span class="tp">async</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>async: <span class="tp">HX</span></span></a><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_file"><span class="tp"><span class="effect">file</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>file: <span class="tp">X</span></span></a><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_exn"><span class="tp"><span class="effect">exn</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="tp">X</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  js inline <span class="st">"&#95;file&#95;stat(fname, function(stats){ return &#95;k(stats.mtime.getTime() &#42; 1e-3); })"</span>  
</span>}


<span class="decl-fun" id="write_text"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_file.html#write_text">write-text<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>write<span class="dash">-</span>text: <span class="tp sp">(</span><span class="tp tpp">fname</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">,</span> <span class="tp tpp">text</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">async</span><span class="tp sp">,</span><span class="tp">file</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>( <a class="pp">fname<span class="pc">fname: <span class="tp">path</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_path-source.html#type_space_path"><span class="tp">path</span><span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>path: <span class="tp">V</span></span></a>, <a class="pp">text<span class="pc">text: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space__lt__gt_"><span class="tp"><span class="effect">&lt;</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&lt;&gt;): <span class="tp">E</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_async"><span class="tp">async</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>async: <span class="tp">HX</span></span></a><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_file"><span class="tp"><span class="effect">file</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>file: <span class="tp">X</span></span></a><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_exn"><span class="tp"><span class="effect">exn</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="tp">X</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space__lp__rp_"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space__lp__rp_"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a> {
  <a class="pp" href="#xwrite_text">xwrite-text<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>xwrite<span class="dash">-</span>text: <span class="tp sp">(</span><span class="tp tpp">fname</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">text</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">async</span><span class="tp sp">,</span><span class="tp">file</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>(<a class="pp">fname<span class="pc">fname: <span class="tp">path</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_path-source.html#string">string<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>string: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>,<a class="pp">text<span class="pc">text: <span class="tp">string</span></span></a>)
</span>}

<span class="decl-fun" id="xwrite_text"><span class="kw">extern</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_file.html#xwrite_text">xwrite-text<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>xwrite<span class="dash">-</span>text: <span class="tp sp">(</span><span class="tp tpp">fname</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">text</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">async</span><span class="tp sp">,</span><span class="tp">file</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp sp">)</span></span></a>( <a class="pp">fname<span class="pc">fname: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>, <a class="pp">text<span class="pc">text: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space__lt__gt_"><span class="tp"><span class="effect">&lt;</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&lt;&gt;): <span class="tp">E</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_async"><span class="tp">async</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>async: <span class="tp">HX</span></span></a><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_file"><span class="tp"><span class="effect">file</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>file: <span class="tp">X</span></span></a><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_exn"><span class="tp"><span class="effect">exn</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="tp">X</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space__lp__rp_"><span class="tp">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space__lp__rp_"><span class="tp">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a> {
  js inline <span class="st">"&#95;file&#95;write&#95;text(fname, text, &#95;k)"</span>
</span>}


<span class="decl-fun" id="read_text"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_file.html#read_text">read-text<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>read<span class="dash">-</span>text: <span class="tp sp">(</span><span class="tp tpp">fname</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">async</span><span class="tp sp">,</span><span class="tp">file</span><span class="tp sp">&gt;</span> <span class="tp">string</span></span></a>( <a class="pp">fname<span class="pc">fname: <span class="tp">path</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_path-source.html#type_space_path"><span class="tp">path</span><span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>path: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space__lt__gt_"><span class="tp"><span class="effect">&lt;</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&lt;&gt;): <span class="tp">E</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_async"><span class="tp">async</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>async: <span class="tp">HX</span></span></a><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_file"><span class="tp"><span class="effect">file</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>file: <span class="tp">X</span></span></a><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_exn"><span class="tp"><span class="effect">exn</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="tp">X</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> {
  <a class="pp" href="#xread_text">xread-text<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>xread<span class="dash">-</span>text: <span class="tp sp">(</span><span class="tp tpp">fname</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">async</span><span class="tp sp">,</span><span class="tp">file</span><span class="tp sp">&gt;</span> <span class="tp">string</span></span></a>(<a class="pp">fname<span class="pc">fname: <span class="tp">path</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_path-source.html#string">string<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>path<span class="fslash last">/</span></span>string: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">path</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>)
</span>}

<span class="decl-fun" id="xread_text"><span class="kw">extern</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_file.html#xread_text">xread-text<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>xread<span class="dash">-</span>text: <span class="tp sp">(</span><span class="tp tpp">fname</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">async</span><span class="tp sp">,</span><span class="tp">file</span><span class="tp sp">&gt;</span> <span class="tp">string</span></span></a>( <a class="pp">fname<span class="pc">fname: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space__lt__gt_"><span class="tp"><span class="effect">&lt;</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&lt;&gt;): <span class="tp">E</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_async"><span class="tp">async</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>async: <span class="tp">HX</span></span></a><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_file"><span class="tp"><span class="effect">file</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>file: <span class="tp">X</span></span></a><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_exn"><span class="tp"><span class="effect">exn</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="tp">X</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> {
  js inline <span class="st">"&#95;file&#95;read&#95;text(fname, &#95;k)"</span>
</span>}


<span class="decl-fun" id="download_text"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_file.html#download_text">download-text<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>download<span class="dash">-</span>text: <span class="tp sp">(</span><span class="tp tpp">url</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">timeout</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">net</span><span class="tp sp">,</span><span class="tp">async</span><span class="tp sp">&gt;</span> <span class="tp">string</span></span></a>( <a class="pp">url<span class="pc">url: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>, <a class="pp">timeout<span class="pc">timeout: <span class="tp op">?</span><span class="tp">duration</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_duration-source.html#duration_1">duration<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">secs</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">duration</span></span></a>(<span class="number">10</span>) ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space__lt__gt_"><span class="tp"><span class="effect">&lt;</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&lt;&gt;): <span class="tp">E</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_async"><span class="tp">async</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>async: <span class="tp">HX</span></span></a><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_net"><span class="tp"><span class="effect">net</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>net: <span class="tp">X</span></span></a><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_exn"><span class="tp"><span class="effect">exn</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="tp">X</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> {
  <a class="pp" href="#xdownload_text">xdownload-text<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>xdownload<span class="dash">-</span>text: <span class="tp sp">(</span><span class="tp tpp">url</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">timeout</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">net</span><span class="tp sp">,</span><span class="tp">async</span><span class="tp sp">&gt;</span> <span class="tp">string</span></span></a>(<a class="pp">url<span class="pc">url: <span class="tp">string</span></span></a>,<a class="pp">timeout<span class="pc">timeout: <span class="tp">duration</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_time_duration-source.html#seconds">seconds<span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>seconds: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">timespan</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_fixed-source.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>fixed<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp">fixed</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a><span class="number">1000.0</span>)
</span>}

<span class="decl-fun" id="xdownload_text"><span class="kw">extern</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_os_file.html#xdownload_text">xdownload-text<span class="pc"><span class="mo">std<span class="fslash">/</span>os<span class="fslash">/</span>file<span class="fslash last">/</span></span>xdownload<span class="dash">-</span>text: <span class="tp sp">(</span><span class="tp tpp">url</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">timeout</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><span class="tp">exn</span><span class="tp sp">,</span><span class="tp">net</span><span class="tp sp">,</span><span class="tp">async</span><span class="tp sp">&gt;</span> <span class="tp">string</span></span></a>( <a class="pp">url<span class="pc">url: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a>, <a class="pp">timeout<span class="pc">timeout: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space__lt__gt_"><span class="tp"><span class="effect">&lt;</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&lt;&gt;): <span class="tp">E</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_async"><span class="tp">async</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>async: <span class="tp">HX</span></span></a><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_net"><span class="tp"><span class="effect">net</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>net: <span class="tp">X</span></span></a><span class="tp sp">,</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_exn"><span class="tp"><span class="effect">exn</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="tp">X</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> {
  js inline <span class="st">"&#95;file&#95;download&#95;text(url, timeout, &#95;k)"</span>
</span>}
</pre>

</div></body>
</html>
