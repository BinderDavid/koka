<!DOCTYPE html>
<html>
<!-- NO_CLICK_TRACKING -->

<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />

<style type="text/css">.koka .plaincode, .koka a.pp .pc { display: none; } .koka a.pp { color: inherit; text-decoration: none; }</style>
<link rel="stylesheet" type="text/css" href="styles/madoko.css" />
<link rel="stylesheet" type="text/css" href="styles/koka.css" />

<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Noto+Serif:400,400italic,700,700italic" />
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700,400italic" />

<title>decimal.kk documentation</title>
</head>

<body class="koka doc body"><div class="madoko">
<pre class="koka source"><span class="comment">/&#42;---------------------------------------------------------------------------
  Copyright 2012-2016 Microsoft Corporation.
 
  This is free software; you can redistribute it and/or modify it under the
  terms of the Apache License, Version 2.0. A copy of the License can be
  found in the file "license.txt" at the root of this distribution.
---------------------------------------------------------------------------&#42;/</span>

<span class="comment">// Operations on arbitrary precision decimal numbers.
</span><span class="kw">module</span> decimal

<span class="kw">import</span> regex

<span class="comment">// Type of a decimal number. Decimals have arbitrary precision and range and 
// do exact decimal arithmetic and are well suited for financial calculations for 
// example.
</span><span class="decl-type" id="type_space_decimal"><span class="kw">abstract</span> <span class="tp kw">struct</span> <span class="decl-con" id="con_space_Decimal"><a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> (
  <span class="decl-fun" id="num"><a class="pp">num<span class="pc">num: <span class="tp">int</span></span></a></span><span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a>,
  <span class="decl-fun" id="exp"><a class="pp">exp<span class="pc">exp: <span class="tp">int</span></span></a></span><span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a>
</span></span>)

<span class="comment">// The decimal zero.
</span><span class="decl-val" id="zero"><span class="kw">public</span> <span class="kw">val</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#zero">zero<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>zero: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="#con_space_Decimal"><span class="co">Decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Decimal: <span class="tp sp">(</span><span class="tp tpp">num</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<span class="number">0</span>,<span class="number">0</span></span>)

<span class="comment">// round exponents to specific intervals (7) to avoid too much rescaling
</span><span class="decl-fun" id="round_exp"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#round_exp">round-exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>round<span class="dash">-</span>exp: <span class="tp sp">(</span><span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>( <a class="pp">exp<span class="pc">exp: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">exp</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#zero_ques_">zero?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>zero?: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <span class="number">0</span> <span class="kw">else</span> <span class="number">7</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_star_">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">exp<span class="pc">exp: <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_fs_">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <span class="number">7</span>)
</span>}

<span class="comment">// Create a decimal from an integer &#96;i&#96; with an optional
// exponent &#96;exp&#96; (=&#96;0&#96;) such that the result equals &#96;i&#96;&amp;times;10^&#96;exp&#96;^.
</span><span class="decl-fun" id="decimal_exp"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#decimal_exp">decimal-exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal<span class="dash">-</span>exp: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a>, <a class="pp">exp<span class="pc">exp: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="number">0</span> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> {
  <span class="comment">// use exponents only at specific intervals to avoid too much re-scaling
</span>  <span class="kw">val</span> <a class="pp">x<span class="pc">x: <span class="tp">int</span></span></a> <span class="kw">=</span> <a class="pp" href="#round_exp">round-exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>round<span class="dash">-</span>exp: <span class="tp sp">(</span><span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">exp<span class="pc">exp: <span class="tp">int</span></span></a>)  <span class="comment">// always x &lt;= exp
</span>  <span class="kw">val</span> <a class="pp">diff<span class="pc">diff: <span class="tp">int</span></span></a> <span class="kw">=</span> <a class="pp">exp<span class="pc">exp: <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">x<span class="pc">x: <span class="tp">int</span></span></a>
  <span class="comment">//trace("decimal-exp: " + i.show + "x" + exp.show + ", diff: " + diff.show + ", x: " + x.show)
</span>  <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">diff</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#zero_ques_">zero?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>zero?: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp" href="#con_space_Decimal"><span class="co">Decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Decimal: <span class="tp sp">(</span><span class="tp tpp">num</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a>,<a class="pp">exp<span class="pc">exp: <span class="tp">int</span></span></a>) <span class="kw">else</span> <a class="pp" href="#con_space_Decimal"><span class="co">Decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Decimal: <span class="tp sp">(</span><span class="tp tpp">num</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#mul_pow10">mul-pow10<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>mul<span class="dash">-</span>pow10: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">diff<span class="pc">diff: <span class="tp">int</span></span></a>),<a class="pp">x<span class="pc">x: <span class="tp">int</span></span></a>)
</span>}

<span class="comment">// Create a decimal number with precision &#96;prec&#96; (=&#96;-1&#96;) from a 
// whole part &#96;i&#96; and fractional part &#96;frac&#96;. The result is &#96;i + frac&#96;&amp;times;10^-&#96;prec&#96;^.
// i.e. &#96;prec&#96; determines how many digits there are behind the dot.
// &#96;decimal(1,123,4).show == "1.0123"&#96;\
// &#96;decimal(1,123).show == "1.123"&#96;\
// &#96;decimal(123).show == "123"&#96;\
// If &#96;prec&#96; is negative or smaller than the number of digits in &#96;frac&#96;, 
// the result will take the width of &#96;frac&#96; in digits as its precision.\
// &#96;decimal(1,123,2).show == "1.123"&#96;
</span><span class="decl-fun" id="decimal"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#decimal">decimal<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a>, <a class="pp">frac<span class="pc">frac: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="number">0</span>, <a class="pp">prec<span class="pc">prec: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="number">-1</span> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">frac</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#zero_ques_">zero?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>zero?: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_bar__bar_">||<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(||): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#zero_ques_">zero?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>zero?: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp"><span class="kw">return</span><span class="pc">return: <span class="tp">decimal</span></span></a> <a class="pp" href="#con_space_Decimal"><span class="co">Decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Decimal: <span class="tp sp">(</span><span class="tp tpp">num</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a>,<span class="number">0</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space__lp__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(): <span class="tp sp">(</span><span class="tp sp">)</span></span></a>
  <span class="kw">val</span> <a class="pp">ds<span class="pc">ds: <span class="tp">int</span></span></a>    <span class="kw">=</span> <a class="pp">frac<span class="pc">frac: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#count_digits">count-digits<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>count<span class="dash">-</span>digits: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
  <span class="kw">val</span> <a class="pp">fprec<span class="pc">fprec: <span class="tp">int</span></span></a> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#max">max<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>max: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">ds<span class="pc">ds: <span class="tp">int</span></span></a>,<a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a>) <span class="comment">// always &gt; 0
</span>  <a class="pp" href="#decimal_exp">decimal-exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal<span class="dash">-</span>exp: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#mul_pow10">mul-pow10<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>mul<span class="dash">-</span>pow10: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">fprec<span class="pc">fprec: <span class="tp">int</span></span></a>) <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">frac<span class="pc">frac: <span class="tp">int</span></span></a>, <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><a class="pp">fprec<span class="pc">fprec: <span class="tp">int</span></span></a> )
</span>}


<span class="comment">/&#42; Create a decimal from a &#96;:double&#96; with a specified maximal precision (=&#96;16&#96; which is the maximal precision of a &#96;:double&#96;).
Note: creating a &#96;:decimal&#96; from a &#96;:double&#96; may loose precision and give surprising results as many decimal 
fractions cannot be represented precisely by a &#96;:double&#96;. Use &#96;decimal-exp&#96; or &#96;parse-decimal&#96; when exact representations
are required. For example:
&#96;&#96;&#96;
&gt; decimal(1.1)
1.1000000000000001
&gt; decimal(1.2)
1.2
&#96;&#96;&#96;
&#42;/</span>
<span class="decl-fun" id="decimal_1"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#decimal_1">decimal<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">max<span class="dash">-</span>prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">d<span class="pc">d: <span class="tp">double</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a>, <a class="pp">max-prec<span class="pc">max<span class="dash">-</span>prec: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="number">16</span> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> {
  <span class="comment">// todo: optimize 
</span>  <span class="kw">val</span> <a class="pp">fl<span class="pc">fl: <span class="tp">double</span></span></a> <span class="kw">=</span> <a class="pp">d<span class="pc">d: <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#floor">floor<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>floor: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>
  <span class="kw">val</span> <a class="pp">fr<span class="pc">fr: <span class="tp">double</span></span></a> <span class="kw">=</span> <a class="pp">d<span class="pc">d: <span class="tp">double</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_dash__2">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">fl<span class="pc">fl: <span class="tp">double</span></span></a>
  <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">fr</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#zero_ques__1">zero?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>zero?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp"><span class="kw">return</span><span class="pc">return: <span class="tp">decimal</span></span></a> <a class="pp" href="#decimal">decimal<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">fl<span class="pc">fl: <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#int_2">int<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space__lp__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(): <span class="tp sp">(</span><span class="tp sp">)</span></span></a> 
  <span class="kw">val</span> <a class="pp">p<span class="pc">p: <span class="tp">int</span></span></a> <span class="kw">=</span> <a class="pp">fr<span class="pc">fr: <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#show_fixed">show-fixed<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>show<span class="dash">-</span>fixed: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">precision</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<a class="pp">max-prec<span class="pc">max<span class="dash">-</span>prec: <span class="tp">int</span></span></a>)<span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#count_1">count<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>count<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <span class="number">2</span>
  <a class="pp" href="#decimal">decimal<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">fl<span class="pc">fl: <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#int_2">int<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>, (<a class="pp">fr<span class="pc">fr: <span class="tp">double</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#pow10_1">pow10<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>pow10<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">p<span class="pc">p: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>))<span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#int_2">int<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>, <a class="pp">p<span class="pc">p: <span class="tp">int</span></span></a>)
</span>}


<span class="comment">// Parse a &#96;:decimal&#96; number where a dot (&#96;.&#96;) separates the factional part.
</span><span class="decl-fun" id="parse_decimal"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#parse_decimal">parse-decimal<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>parse<span class="dash">-</span>decimal: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">decimal</span><span class="tp sp">&gt;</span></span></a>( <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_maybe"><span class="tp">maybe</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>maybe: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> {
  <span class="kw">match</span>(<a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_regex-source.html#find">find<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>find: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">regex</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp">matched</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="#rx_decimal">rx-decimal<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>rx<span class="dash">-</span>decimal: <span class="tp">regex</span></span></a>)) {
    <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a> <span class="kw op">-></span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>
    <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">cap<span class="pc">cap: <span class="tp">matched</span></span></a>) <span class="kw op">-></span> {
      <span class="kw">val</span> <a class="pp">sign<span class="pc">sign: <span class="tp">string</span></span></a>  <span class="kw">=</span> <a class="pp">cap<span class="pc">cap: <span class="tp">matched</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_regex-source.html#groups">groups<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>groups: <span class="tp sp">(</span><span class="tp tpp">matched</span> <span class="tp kw op">:</span> <span class="tp">matched</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">groups</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_regex-source.html#_index_">[<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>[]: <span class="tp sp">(</span><span class="tp tpp">groups</span> <span class="tp kw op">:</span> <span class="tp">groups</span><span class="tp sp">,</span> <span class="tp tpp">index</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><span class="number">1</span>]
      <span class="kw">val</span> <a class="pp">whole<span class="pc">whole: <span class="tp">string</span></span></a> <span class="kw">=</span> <a class="pp">cap<span class="pc">cap: <span class="tp">matched</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_regex-source.html#groups">groups<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>groups: <span class="tp sp">(</span><span class="tp tpp">matched</span> <span class="tp kw op">:</span> <span class="tp">matched</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">groups</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_regex-source.html#_index_">[<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>[]: <span class="tp sp">(</span><span class="tp tpp">groups</span> <span class="tp kw op">:</span> <span class="tp">groups</span><span class="tp sp">,</span> <span class="tp tpp">index</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><span class="number">2</span>]
      <span class="kw">val</span> <a class="pp">frac<span class="pc">frac: <span class="tp">string</span></span></a>  <span class="kw">=</span> <a class="pp">cap<span class="pc">cap: <span class="tp">matched</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_regex-source.html#groups">groups<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>groups: <span class="tp sp">(</span><span class="tp tpp">matched</span> <span class="tp kw op">:</span> <span class="tp">matched</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">groups</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_regex-source.html#_index_">[<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>[]: <span class="tp sp">(</span><span class="tp tpp">groups</span> <span class="tp kw op">:</span> <span class="tp">groups</span><span class="tp sp">,</span> <span class="tp tpp">index</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><span class="number">3</span>] 
      <span class="kw">val</span> <a class="pp">fracx<span class="pc">fracx: <span class="tp">string</span></span></a> <span class="kw">=</span> <a class="pp">cap<span class="pc">cap: <span class="tp">matched</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_regex-source.html#groups">groups<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>groups: <span class="tp sp">(</span><span class="tp tpp">matched</span> <span class="tp kw op">:</span> <span class="tp">matched</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">groups</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_regex-source.html#_index_">[<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>[]: <span class="tp sp">(</span><span class="tp tpp">groups</span> <span class="tp kw op">:</span> <span class="tp">groups</span><span class="tp sp">,</span> <span class="tp tpp">index</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a><span class="number">4</span>]
      <span class="kw">val</span> <a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a>  <span class="kw">=</span> <a class="pp">frac<span class="pc">frac: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#count_1">count<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>count<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>  <span class="comment">// can be zero
</span>      <span class="kw">val</span> <a class="pp">f<span class="pc">f: <span class="tp">decimal</span></span></a> <span class="kw">=</span> <a class="pp" href="#decimal">decimal<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">frac</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">whole<span class="pc">whole: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#parse_int_default">parse-int-default<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>parse<span class="dash">-</span>int<span class="dash">-</span>default: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">default</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">hex</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<span class="number">0</span>), <a class="pp">fracx<span class="pc">fracx: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#parse_int_default">parse-int-default<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>parse<span class="dash">-</span>int<span class="dash">-</span>default: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">default</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">hex</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<span class="number">0</span>), <a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a> )
      <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">sign</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_eq__eq__3">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><span class="st">"-"</span>) <span class="kw">then</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp" href="#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a><a class="pp">f<span class="pc">f: <span class="tp">decimal</span></span></a>) <span class="kw">else</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">maybe</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></span></a>(<a class="pp">f<span class="pc">f: <span class="tp">decimal</span></span></a>)
    }
  }
</span>}
<span class="decl-val" id="rx_decimal"><span class="kw">val</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#rx_decimal">rx-decimal<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>rx<span class="dash">-</span>decimal: <span class="tp">regex</span></span></a> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_text_regex-source.html#regex">regex<span class="pc"><span class="mo">std<span class="fslash">/</span>text<span class="fslash">/</span>regex<span class="fslash last">/</span></span>regex: <span class="tp sp">(</span><span class="tp tpp">regex</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">ignorecase</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp tpp">multiline</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">regex</span></span></a>(<span class="st">"^([\\-\\+]?)(\\d+)(?:\\.(0&#42;([1-9]\\d&#42;))?)$"</span></span>)


<span class="comment">// Ensure a decimal &#96;x&#96; has an exponent such that &#96;x.exp &lt;= e&#96;.
</span><span class="decl-fun" id="expand"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#expand">expand<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>expand: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">e</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a>, <a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">x</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_lt__eq__1">&lt;=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&lt;=)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a>) <span class="kw">then</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="kw">else</span> {
    <span class="comment">//trace("expand: " + x.show + " to exp " + p.show)
</span>    <a class="pp" href="#decimal_exp">decimal-exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal<span class="dash">-</span>exp: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#mul_pow10">mul-pow10<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>mul<span class="dash">-</span>pow10: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a> ), <a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a> )
  }
</span>}

<span class="comment">// Choose an exponent that minimizes memory usage.
</span><span class="decl-fun" id="reduce"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#reduce">reduce<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>reduce: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> {
  <span class="kw">val</span> <a class="pp">p<span class="pc">p: <span class="tp">int</span></span></a>   <span class="kw">=</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#pow10_ques_">pow10?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>pow10?: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
  <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">!</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">p<span class="pc">p: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#pos_ques__1">pos?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>pos?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <a class="pp"><span class="kw">return</span><span class="pc">return: <span class="tp">decimal</span></span></a> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a>
  <span class="kw">val</span> <a class="pp">expp<span class="pc">expp: <span class="tp">int</span></span></a><span class="kw">=</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">p<span class="pc">p: <span class="tp">int</span></span></a>
  <span class="comment">// trace("reduce: x:" + x.showx + ", p:" + p.show + ", expp:" + expp.show)
</span>  <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">round-exp</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a>(<a class="pp">expp<span class="pc">expp: <span class="tp">int</span></span></a>)<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_eq__eq__1">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>) <span class="kw">then</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="kw">else</span> <a class="pp" href="#decimal_exp">decimal-exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal<span class="dash">-</span>exp: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#cdiv_pow10">cdiv-pow10<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>cdiv<span class="dash">-</span>pow10: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">p<span class="pc">p: <span class="tp">int</span></span></a>), <a class="pp">expp<span class="pc">expp: <span class="tp">int</span></span></a>)
</span>}

<span class="comment">// Add two decimals.
</span><span class="decl-fun" id="_plus_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#_plus_">(+)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> {
  <span class="kw">val</span> <a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a>  <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#min">min<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>min: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>,<a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>)
  <span class="kw">val</span> <a class="pp">xx<span class="pc">xx: <span class="tp">decimal</span></span></a> <span class="kw">=</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#expand">expand<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>expand: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">e</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a>)
  <span class="kw">val</span> <a class="pp">yy<span class="pc">yy: <span class="tp">decimal</span></span></a> <span class="kw">=</span> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#expand">expand<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>expand: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">e</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a>)
  <a class="pp" href="#con_space_Decimal"><span class="co">Decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Decimal: <span class="tp sp">(</span><span class="tp tpp">num</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">xx<span class="pc">xx: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">yy<span class="pc">yy: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>, <a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a>)
</span>}

<span class="comment">// Negate a decimal.
</span><span class="decl-fun" id="_tilde_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#_tilde_">(~)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> {
  <a class="pp" href="#con_space_Decimal"><span class="co">Decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Decimal: <span class="tp sp">(</span><span class="tp tpp">num</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>, <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>)
</span>}

<span class="comment">// Subtract two decimals.
</span><span class="decl-fun" id="_dash_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#_dash_">(-)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> {
  <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <a class="pp" href="#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a> (<a class="pp" href="#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a><a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a>)
</span>}

<span class="comment">// Increment a decimal
</span><span class="decl-fun" id="inc"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#inc">inc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>inc: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> {
  <a class="pp" href="#con_space_Decimal"><span class="co">Decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Decimal: <span class="tp sp">(</span><span class="tp tpp">num</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#inc">inc<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>inc: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>, <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>)
</span>}

<span class="comment">// Decrement a decimal
</span><span class="decl-fun" id="dec"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#dec">dec<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>dec: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> {
  <a class="pp" href="#con_space_Decimal"><span class="co">Decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Decimal: <span class="tp sp">(</span><span class="tp tpp">num</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#dec">dec<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>dec: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>, <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>)
</span>}

<span class="comment">// Is this an even decimal?
</span><span class="decl-fun" id="even_ques__1"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#even_ques__1">even?<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>even?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> {
  <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#even_ques_">even?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>even?: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>
</span>}

<span class="comment">// Is this an odd decimal?
</span><span class="decl-fun" id="odd_ques_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#odd_ques_">odd?<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>odd?: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span><a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> {
  <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#odd_ques_">odd?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>odd?: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>
</span>}


<span class="comment">// Is this decimal zero?
</span><span class="decl-fun" id="zero_ques_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#zero_ques_">zero?<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>zero?: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> {
  <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#zero_ques_">zero?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>zero?: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> 
</span>}

<span class="comment">// Is the decimal positive?
</span><span class="decl-fun" id="pos_ques_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#pos_ques_">pos?<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>pos?: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> {
  <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#pos_ques__1">pos?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>pos?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>
</span>}

<span class="comment">// Is the decimal negative?
</span><span class="decl-fun" id="neg_ques_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#neg_ques_">neg?<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>neg?: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> {
  <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#neg_ques__1">neg?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>neg?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>
</span>}

<span class="comment">// Show a decimal to a specified maximum precision (=&#96;-1&#96;). use a negative value to 
// use maximum precision required.
</span><span class="decl-fun" id="show"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#show">show<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>show: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">max<span class="dash">-</span>prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a>, <a class="pp">max-prec<span class="pc">max<span class="dash">-</span>prec: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="number">-1</span> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> {
  <span class="comment">// trace("show: " + x.num.show + "x" + x.exp.show)
</span>  <span class="kw">val</span> <a class="pp">cx<span class="pc">cx: <span class="tp">decimal</span></span></a>   <span class="kw">=</span> <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">max-prec</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#neg_ques__1">neg?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>neg?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#reduce">reduce<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>reduce: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a> <span class="kw">else</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#round_to_prec">round-to-prec<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>round<span class="dash">-</span>to<span class="dash">-</span>prec: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">rnd</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">round</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">decimal</span></span></a>(<a class="pp">max-prec<span class="pc">max<span class="dash">-</span>prec: <span class="tp">int</span></span></a>)
  <a class="pp">cx<span class="pc">cx: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#showx">showx<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>showx: <span class="tp sp">(</span><span class="tp tpp">cx</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>()
</span>}

<span class="decl-fun" id="showx"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#showx">showx<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>showx: <span class="tp sp">(</span><span class="tp tpp">cx</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>( <a class="pp">cx<span class="pc">cx: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_string"><span class="tp">string</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string: <span class="tp">V</span></span></a> {
  <span class="comment">//trace("showx: " + cx.num.show + "x" + cx.exp.show)
</span>  <span class="kw">val</span> <a class="pp">sign<span class="pc">sign: <span class="tp">string</span></span></a> <span class="kw">=</span> <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">cx</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#neg_ques__1">neg?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>neg?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <span class="st">"-"</span> <span class="kw">else</span> <span class="st">""</span>
  <span class="kw">val</span> <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a>    <span class="kw">=</span> <a class="pp">cx<span class="pc">cx: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#abs">abs<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>abs: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#show_1">show<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>show<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>
  <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">!</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">cx<span class="pc">cx: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#neg_ques__1">neg?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>neg?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> {
    <a class="pp">sign<span class="pc">sign: <span class="tp">string</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#repeat">repeat<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>repeat: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<span class="st">"0"</span>,<a class="pp">cx<span class="pc">cx: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>)
  }
  <span class="kw">else</span> {
    <span class="kw">val</span> <a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a>  <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><a class="pp">cx<span class="pc">cx: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
    <span class="kw">val</span> <a class="pp">sfrac<span class="pc">sfrac: <span class="tp">sslice</span></span></a> <span class="kw">=</span> <a class="pp">s<span class="pc">s: <span class="tp">string</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#last_2">last<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>last<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">sslice</span></span></a>(<a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a>)
    <span class="kw">val</span> <a class="pp">frac<span class="pc">frac: <span class="tp">string</span></span></a>  <span class="kw">=</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#repeat">repeat<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>repeat: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<span class="st">"0"</span>, <a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">sfrac<span class="pc">sfrac: <span class="tp">sslice</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#count_2">count<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>count<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">slice</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> ) <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">sfrac<span class="pc">sfrac: <span class="tp">sslice</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#string_3">string<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp tpp">slice</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>)<span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#trim_right_1">trim-right<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>trim<span class="dash">-</span>right<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">,</span> <span class="tp tpp">sub</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>(<span class="st">"0"</span>)
    <span class="kw">val</span> <a class="pp">whole<span class="pc">whole: <span class="tp">string</span></span></a> <span class="kw">=</span> <a class="pp">sfrac<span class="pc">sfrac: <span class="tp">sslice</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#before">before<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>before: <span class="tp sp">(</span><span class="tp tpp">slice</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">sslice</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#string_3">string<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>string<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp tpp">slice</span> <span class="tp kw op">:</span> <span class="tp">sslice</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a>
    <a class="pp">sign<span class="pc">sign: <span class="tp">string</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> (<span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">whole</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#empty_ques__1">empty?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>empty?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <span class="st">"0"</span> <span class="kw">else</span> <span class="st">""</span>) <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">whole<span class="pc">whole: <span class="tp">string</span></span></a> 
          <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> (<span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">frac</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#empty_ques__1">empty?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>empty?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">s</span> <span class="tp kw op">:</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <span class="st">""</span> <span class="kw">else</span> <span class="st">"."</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__3">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.3</span>: <span class="tp sp">(</span><span class="tp">string</span><span class="tp sp">,</span> <span class="tp">string</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">string</span></span></a> <a class="pp">frac<span class="pc">frac: <span class="tp">string</span></span></a>)
  }
</span>}

<span class="comment">// Multiply two decimals with full precision.
</span><span class="decl-fun" id="_star_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#_star_">(&#42;)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(&#42;): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> {
  <span class="kw">val</span> <a class="pp">z<span class="pc">z: <span class="tp">decimal</span></span></a> <span class="kw">=</span> <a class="pp" href="#decimal_exp">decimal-exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal<span class="dash">-</span>exp: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_star_">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>, <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus_">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>)
  <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">z</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#neg_ques__1">neg?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>neg?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp">z<span class="pc">z: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#reduce">reduce<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>reduce: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a> <span class="kw">else</span> <a class="pp">z<span class="pc">z: <span class="tp">decimal</span></span></a>
</span>}

<span class="comment">// Rounding modes.
</span><span class="decl-type" id="type_space_round"><span class="kw">public</span> <span class="tp kw">type</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#type_space_round"><span class="tp">round</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>round: <span class="tp">V</span></span></a> {
  <span class="decl-con" id="con_space_Even"><a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#con_space_Even"><span class="co">Even</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Even: <span class="tp">round</span></span></a></span>
  <span class="decl-con" id="con_space_HalfUp"><a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#con_space_HalfUp"><span class="co">HalfUp</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>HalfUp: <span class="tp">round</span></span></a></span>
  <span class="decl-con" id="con_space_HalfDown"><a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#con_space_HalfDown"><span class="co">HalfDown</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>HalfDown: <span class="tp">round</span></span></a></span>
  <span class="decl-con" id="con_space_Floor"><a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#con_space_Floor"><span class="co">Floor</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Floor: <span class="tp">round</span></span></a></span>
  <span class="decl-con" id="con_space_Ceil"><a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#con_space_Ceil"><span class="co">Ceil</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Ceil: <span class="tp">round</span></span></a></span>
  <span class="decl-con" id="con_space_Up"><a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#con_space_Up"><span class="co">Up</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Up: <span class="tp">round</span></span></a></span>
  <span class="decl-con" id="con_space_Down"><a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#con_space_Down"><span class="co">Down</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Down: <span class="tp">round</span></span></a></span>
</span>}

<span class="comment">// Round a &#96;:decimal&#96; number to an integer an optional rounding mode &#96;rnd&#96; (=&#96;Even&#96;).
</span><span class="decl-fun" id="int"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#int">int<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>int: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">rnd</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">round</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a>, <a class="pp">rnd<span class="pc">rnd: <span class="tp op">?</span><span class="tp">round</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">round</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="#con_space_Even"><span class="co">Even</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Even: <span class="tp">round</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> {
  <span class="kw">val</span> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a> <span class="kw">=</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#round">round<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>round: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">rnd</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">round</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">rnd<span class="pc">rnd: <span class="tp">round</span></span></a>)  <span class="comment">// y.exp &gt;= 0
</span>  <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">y</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#pos_ques__1">pos?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>pos?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#mul_pow10">mul-pow10<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>mul<span class="dash">-</span>pow10: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>) <span class="kw">else</span> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
</span>}

<span class="comment">// Round a &#96;:decimal&#96; number to a whole number with an optional rounding mode (=&#96;Even&#96;).
</span><span class="decl-fun" id="round"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#round">round<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>round: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">rnd</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">round</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a>, <a class="pp">rnd<span class="pc">rnd: <span class="tp op">?</span><span class="tp">round</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">round</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="#con_space_Even"><span class="co">Even</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Even: <span class="tp">round</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> {
  <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#round_to_prec">round-to-prec<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>round<span class="dash">-</span>to<span class="dash">-</span>prec: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">rnd</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">round</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">decimal</span></span></a>(<span class="number">0</span>,<a class="pp">rnd<span class="pc">rnd: <span class="tp">round</span></span></a>)
</span>}

<span class="comment">// Round the decimal-point number &#96;x&#96; to 
// to a specified number of digits behind the dot &#96;prec&#96; (=&#96;0&#96;) with an optional
// rounding mode &#96;rnd&#96; (=&#96;Even&#96;). The precision can be negative.\
// &#96;decimal(1,485).round-to-prec(2).show == "1.48"&#96; \
// &#96;decimal(112,49).round-to-prec(-1).show == "110"&#96;
</span><span class="decl-fun" id="round_to_prec"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#round_to_prec">round-to-prec<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>round<span class="dash">-</span>to<span class="dash">-</span>prec: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">rnd</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">round</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">total</span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a>, <a class="pp">prec<span class="pc">prec: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="number">0</span>, <a class="pp">rnd<span class="pc">rnd: <span class="tp op">?</span><span class="tp">round</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">round</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="#con_space_Even"><span class="co">Even</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Even: <span class="tp">round</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_total"><span class="tp"><span class="effect">total</span></span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>total: <span class="tp">E</span></span></a> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">x</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_gt__eq__1">&gt;=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&gt;=)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a>) <a class="pp"><span class="kw">return</span><span class="pc">return: <span class="tp">decimal</span></span></a> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a>
  <span class="kw">val</span> <a class="pp">cx<span class="pc">cx: <span class="tp">decimal</span></span></a> <span class="kw">=</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#reduce">reduce<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>reduce: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>
  <span class="kw">val</span> <a class="pp">p<span class="pc">p: <span class="tp">int</span></span></a>  <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><a class="pp">cx<span class="pc">cx: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a>
  <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">!</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">p<span class="pc">p: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#pos_ques__1">pos?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>pos?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <a class="pp"><span class="kw">return</span><span class="pc">return: <span class="tp">decimal</span></span></a> <a class="pp">cx<span class="pc">cx: <span class="tp">decimal</span></span></a>  <span class="comment">// already less than prec precision
</span>
  <span class="kw">val</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a>,<a class="pp">r<span class="pc">r: <span class="tp">int</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a> <span class="kw">=</span> <a class="pp">cx<span class="pc">cx: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#divmod_pow10">divmod-pow10<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>divmod<span class="dash">-</span>pow10: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span></span></a>(<a class="pp">p<span class="pc">p: <span class="tp">int</span></span></a>)

  <span class="decl-fun" id="round_half"><span class="kw">fun</span> <a class="pp">round-half<span class="pc">round<span class="dash">-</span>half: <span class="tp sp">(</span><span class="tp tpp">keep<span class="dash">-</span>on<span class="dash">-</span>eq</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>( <a class="pp">keep-on-eq<span class="pc">keep<span class="dash">-</span>on<span class="dash">-</span>eq: <span class="tp">bool</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> ) {
    <span class="kw">val</span> <a class="pp">half<span class="pc">half: <span class="tp">int</span></span></a> <span class="kw">=</span> <a class="pp">p<span class="pc">p: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#pow10">pow10<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>pow10: <span class="tp sp">(</span><span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_fs_">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <span class="number">2</span>
    <span class="kw">match</span>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">r<span class="pc">r: <span class="tp">int</span></span></a>,<a class="pp">half<span class="pc">half: <span class="tp">int</span></span></a>)) {
      <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Eq"><span class="co">Eq</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Eq: <span class="tp">order</span></span></a> <span class="kw op">-></span> <span class="kw">if</span> (<a class="pp">keep-on-eq<span class="pc">keep<span class="dash">-</span>on<span class="dash">-</span>eq: <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a> <span class="kw">else</span> <a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#inc">inc<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>inc: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
      <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Gt"><span class="co">Gt</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Gt: <span class="tp">order</span></span></a> <span class="kw op">-></span> <a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#inc">inc<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>inc: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
      <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Lt"><span class="co">Lt</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Lt: <span class="tp">order</span></span></a> <span class="kw op">-></span> <a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a>
    }
  </span>}

  <span class="kw">val</span> <a class="pp">q1<span class="pc">q1: <span class="tp">int</span></span></a> <span class="kw">=</span> <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">r</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#zero_ques_">zero?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>zero?: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a> <span class="kw">else</span> <span class="kw">match</span>(<a class="pp">rnd<span class="pc">rnd: <span class="tp">round</span></span></a>) {  
    <a class="pp" href="#con_space_Even"><span class="co">Even</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Even: <span class="tp">round</span></span></a>     <span class="kw op">-></span> <a class="pp">round-half<span class="pc">round<span class="dash">-</span>half: <span class="tp sp">(</span><span class="tp tpp">keep<span class="dash">-</span>on<span class="dash">-</span>eq</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#even_ques_">even?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>even?: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>)
    <a class="pp" href="#con_space_HalfUp"><span class="co">HalfUp</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>HalfUp: <span class="tp">round</span></span></a>   <span class="kw op">-></span> <a class="pp">round-half<span class="pc">round<span class="dash">-</span>half: <span class="tp sp">(</span><span class="tp tpp">keep<span class="dash">-</span>on<span class="dash">-</span>eq</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#neg_ques__1">neg?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>neg?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>)
    <a class="pp" href="#con_space_HalfDown"><span class="co">HalfDown</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>HalfDown: <span class="tp">round</span></span></a> <span class="kw op">-></span> <a class="pp">round-half<span class="pc">round<span class="dash">-</span>half: <span class="tp sp">(</span><span class="tp tpp">keep<span class="dash">-</span>on<span class="dash">-</span>eq</span> <span class="tp kw op">:</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#pos_ques__1">pos?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>pos?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>)
    <a class="pp" href="#con_space_Floor"><span class="co">Floor</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Floor: <span class="tp">round</span></span></a>    <span class="kw op">-></span> <a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a>
    <a class="pp" href="#con_space_Ceil"><span class="co">Ceil</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Ceil: <span class="tp">round</span></span></a>     <span class="kw op">-></span> <a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#inc">inc<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>inc: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
    <a class="pp" href="#con_space_Up"><span class="co">Up</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Up: <span class="tp">round</span></span></a>       <span class="kw op">-></span> <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">!</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#pos_ques__1">pos?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>pos?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a> <span class="kw">else</span> <a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#inc">inc<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>inc: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
    <a class="pp" href="#con_space_Down"><span class="co">Down</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Down: <span class="tp">round</span></span></a>     <span class="kw op">-></span> <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">!</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#neg_ques__1">neg?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>neg?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a> <span class="kw">else</span> <a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#inc">inc<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>inc: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
  }

  <span class="comment">//trace("round: " + x.showx + ", q: " + q.show + ", r: " + r.show + ", q1: " + q1.show + "e-" + prec.show )
</span>  <a class="pp" href="#decimal_exp">decimal-exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal<span class="dash">-</span>exp: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">q1<span class="pc">q1: <span class="tp">int</span></span></a>,<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><a class="pp">prec<span class="pc">prec: <span class="tp">int</span></span></a>)
</span>}

<span class="comment">// Optimize: Use double division when within precision bounds.
</span><span class="decl-val" id="maxexp"><span class="kw">val</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#maxexp">maxexp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>maxexp: <span class="tp">int</span></span></a>     <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="number">308</span></span> 
<span class="decl-val" id="maxpd"><span class="kw">val</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#maxpd">maxpd<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>maxpd: <span class="tp">double</span></span></a>      <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="number">1.0e15</span></span>
<span class="decl-val" id="maxprecise"><span class="kw">val</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#maxprecise">maxprecise<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>maxprecise: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#int_2">int<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp" href="#maxpd">maxpd<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>maxpd: <span class="tp">double</span></span></a></span>)
<span class="decl-val" id="minprecise"><span class="kw">val</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#minprecise">minprecise<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>minprecise: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><a class="pp" href="#maxprecise">maxprecise<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>maxprecise: <span class="tp">int</span></span></a></span>

<span class="decl-fun" id="precise_ques_"><span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#precise_ques_">precise?<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>precise?: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> {
  (<a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_gt__1">&gt;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&gt;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="#minprecise">minprecise<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>minprecise: <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_amp__amp_">&amp;&amp;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&amp;&amp;): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">i<span class="pc">i: <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_lt__1">&lt;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&lt;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="#maxprecise">maxprecise<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>maxprecise: <span class="tp">int</span></span></a>)
</span>}


<span class="comment">/&#42; Divide two decimals with a given extra precision &#96;min-prec&#96; (=&#96;15&#96;).
The &#96;min-prec&#96; is the number of extra digits used to calculate inexact 
divisions.

Note: the division uses up to &#96;min-prec&#96; precision using &#96;Floor&#96; rounding
for the last digit if the result is  inexact. To round differently, you can
for example divide with larger precision and use &#96;round-to-prec&#96;. 
&#96;&#96;&#96;
&gt; div( decimal(2), decimal(3), 0 )
0
&gt; div( decimal(2), decimal(3), 1 )
0.6
&gt; div( decimal(2), decimal(3) )  // default precision is 15
0.6666666666666666
&gt; div( decimal(2), decimal(3) ).round-to-prec(6)
0.666667
&#96;&#96;&#96;
&#42;/</span>
<span class="decl-fun" id="div"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#div">div<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>div: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">min<span class="dash">-</span>prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a>, <a class="pp">min-prec<span class="pc">min<span class="dash">-</span>prec: <span class="tp op">?</span><span class="tp">int</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_optional"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>optional: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a> <span class="kw">=</span> <span class="number">15</span> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">x</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="#zero_ques_">zero?<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>zero?: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_bar__bar_">||<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(||): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#zero_ques_">zero?<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>zero?: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp"><span class="kw">return</span><span class="pc">return: <span class="tp">decimal</span></span></a> <a class="pp" href="#zero">zero<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>zero: <span class="tp">decimal</span></span></a>
  <span class="kw">val</span> <a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a> <span class="kw">=</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>
  <span class="comment">// use double division if within precision bounds..
</span>  <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">min-prec</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_lt__eq__1">&lt;=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&lt;=)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="number">15</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_amp__amp_">&amp;&amp;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&amp;&amp;): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#abs">abs<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>abs: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_lt__eq__1">&lt;=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&lt;=)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <span class="number">15</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_amp__amp_">&amp;&amp;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&amp;&amp;): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="#precise_ques_">precise?<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>precise?: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_amp__amp_">&amp;&amp;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&amp;&amp;): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="#precise_ques_">precise?<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>precise?: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) {
    <span class="kw">val</span> <a class="pp">r<span class="pc">r: <span class="tp">double</span></span></a> <span class="kw">=</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_fs__1">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>
    <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">e</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#zero_ques_">zero?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>zero?: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp" href="#decimal_1">decimal<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">max<span class="dash">-</span>prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">r<span class="pc">r: <span class="tp">double</span></span></a>) <span class="kw">else</span> <a class="pp" href="#decimal_1">decimal<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">max<span class="dash">-</span>prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">r<span class="pc">r: <span class="tp">double</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#pow10_1">pow10<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>pow10<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>))
  }  
  <span class="kw">else</span> {
    <span class="comment">// otherwise use long integer division
</span>    <span class="kw">val</span> <a class="pp">mp<span class="pc">mp: <span class="tp">int</span></span></a> <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#max">max<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>max: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">min-prec<span class="pc">min<span class="dash">-</span>prec: <span class="tp">int</span></span></a>,<span class="number">0</span>)
    <span class="kw">val</span> <a class="pp">z<span class="pc">z: <span class="tp">decimal</span></span></a> <span class="kw">=</span> <a class="pp" href="#decimal_exp">decimal-exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal<span class="dash">-</span>exp: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">exp</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#mul_pow10">mul-pow10<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>mul<span class="dash">-</span>pow10: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">mp<span class="pc">mp: <span class="tp">int</span></span></a>) <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_fs_">/<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="fslash">/</span>): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>, <a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_dash_">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>): <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a> <a class="pp">mp<span class="pc">mp: <span class="tp">int</span></span></a> )<span class="kw op">.</span><a class="pp" href="#reduce">reduce<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>reduce: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>
    <span class="comment">// trace("div: " + x.show + " / " + y.show + " = " + z.show)
</span>    <a class="pp">z<span class="pc">z: <span class="tp">decimal</span></span></a>
  }
</span>}

<span class="comment">// Divide two decimals using 15 digits of extra precision.
</span><span class="decl-fun" id="_fs_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#_fs_">(/)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(<span class="fslash">/</span>): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> {
  <a class="pp" href="#div">div<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>div: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">min<span class="dash">-</span>prec</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a>,<a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a>)
</span>}


<span class="comment">// Compare decimals.
</span><span class="decl-fun" id="compare"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_order"><span class="tp">order</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>order: <span class="tp">V</span></span></a> {
  <span class="comment">// todo: optimize further to avoid allocations.
</span>  <span class="kw">val</span> <a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a>  <span class="kw">=</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#min">min<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>min: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">j</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>,<a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>)
  <span class="kw">val</span> <a class="pp">xx<span class="pc">xx: <span class="tp">decimal</span></span></a> <span class="kw">=</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#expand">expand<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>expand: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">e</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a>)
  <span class="kw">val</span> <a class="pp">yy<span class="pc">yy: <span class="tp">decimal</span></span></a> <span class="kw">=</span> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#expand">expand<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>expand: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">e</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>(<a class="pp">e<span class="pc">e: <span class="tp">int</span></span></a>)
  <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">xx<span class="pc">xx: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>,<a class="pp">yy<span class="pc">yy: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>)
</span>}


<span class="decl-fun" id="_gt_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#_gt_">(&gt;)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(&gt;): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> (<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> { <a class="pp" href="#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a>,<a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a>) <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_eq__eq__4">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==)<span class="postfix">.4</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Gt"><span class="co">Gt</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Gt: <span class="tp">order</span></span></a> </span>}
<span class="decl-fun" id="_gt__eq_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#_gt__eq_">(&gt;=)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(&gt;=): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> { <a class="pp" href="#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a>,<a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a>) <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_excl__eq__4">!=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(!=)<span class="postfix">.4</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Lt"><span class="co">Lt</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Lt: <span class="tp">order</span></span></a> </span>}
<span class="decl-fun" id="_eq__eq_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#_eq__eq_">(==)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(==): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> { <a class="pp" href="#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a>,<a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a>) <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_eq__eq__4">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==)<span class="postfix">.4</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Eq"><span class="co">Eq</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Eq: <span class="tp">order</span></span></a> </span>}
<span class="decl-fun" id="_excl__eq_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#_excl__eq_">(!=)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(!=): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> { <a class="pp" href="#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a>,<a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a>) <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_excl__eq__4">!=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(!=)<span class="postfix">.4</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Eq"><span class="co">Eq</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Eq: <span class="tp">order</span></span></a> </span>}
<span class="decl-fun" id="_lt_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#_lt_">(&lt;)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(&lt;): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> (<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> { <a class="pp" href="#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a>,<a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a>) <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_eq__eq__4">==<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(==)<span class="postfix">.4</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Lt"><span class="co">Lt</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Lt: <span class="tp">order</span></span></a> </span>}
<span class="decl-fun" id="_lt__eq_"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#_lt__eq_">(&lt;=)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(&lt;=): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a>) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> { <a class="pp" href="#compare">compare<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>compare: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>(<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a>,<a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a>) <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_excl__eq__4">!=<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(!=)<span class="postfix">.4</span>: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">order</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_Gt"><span class="co">Gt</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Gt: <span class="tp">order</span></span></a> </span>}

<span class="comment">// The sign of a decimal number.
</span><span class="decl-fun" id="sign"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#sign">sign<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>sign: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_order"><span class="tp">order</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>order: <span class="tp">V</span></span></a> {
  <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#sign">sign<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>sign: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">order</span></span></a>
</span>}

<span class="comment">// The minimum of &#96;x&#96; and &#96;y&#96;.
</span><span class="decl-fun" id="min"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#min">min<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>min: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">x</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a> <a class="pp" href="#_lt__eq_">&lt;=<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(&lt;=): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a>) <span class="kw">then</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="kw">else</span> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a>
</span>}

<span class="comment">// The maximum of &#96;x&#96; and &#96;y&#96;
</span><span class="decl-fun" id="max"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#max">max<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>max: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a>, <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">x</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a> <a class="pp" href="#_gt__eq_">&gt;=<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(&gt;=): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a>) <span class="kw">then</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="kw">else</span> <a class="pp">y<span class="pc">y: <span class="tp">decimal</span></span></a>
</span>}

<span class="comment">// Take the sum of a list of decimal numbers (0 for the empty list).
</span><span class="decl-fun" id="sum"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#sum">sum<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>sum: <span class="tp sp">(</span><span class="tp tpp">ds</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">decimal</span><span class="tp sp">&gt;</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">ds<span class="pc">ds: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">decimal</span><span class="tp sp">&gt;</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a><span class="tp sp">&gt;</span> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> {
  <a class="pp">ds<span class="pc">ds: <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp">decimal</span><span class="tp sp">&gt;</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#foldr">foldr<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>foldr: <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">xs</span> <span class="tp kw op">:</span> <span class="tp">list</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span><span class="tp sp">,</span> <span class="tp tpp">z</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">,</span> <span class="tp tpp">f</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp tv">e</span> <span class="tp tv">b</span></span></a>(<a class="pp" href="#zero">zero<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>zero: <span class="tp">decimal</span></span></a>,<a class="pp" href="#_plus_">(+)<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(+): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">y</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>)
</span>}

<span class="comment">// The absolute value of a decimal
</span><span class="decl-fun" id="abs"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#abs">abs<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>abs: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">x</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="#neg_ques_">neg?<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>neg?: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp" href="#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">decimal</span></span></a><a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="kw">else</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a>
</span>}


<span class="comment">// Round a &#96;:decimal&#96; to an integer using &#96;Floor&#96; (i.e. round to minus infinity)
</span><span class="decl-fun" id="floor"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#floor">floor<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>floor: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> {
  <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#int">int<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>int: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">rnd</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">round</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp" href="#con_space_Floor"><span class="co">Floor</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Floor: <span class="tp">round</span></span></a>)
</span>}


<span class="comment">// Truncate a &#96;:decimal&#96; to an integer using &#96;Down&#96; (i.e. round to zero)
</span><span class="decl-fun" id="trunc"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#trunc">trunc<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>trunc: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_int"><span class="tp">int</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>int: <span class="tp">V</span></span></a> {
  <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#int">int<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>int: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">,</span> <span class="tp tpp">rnd</span> <span class="tp kw op">:</span> <span class="tp op">?</span><span class="tp">round</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>(<a class="pp" href="#con_space_Down"><span class="co">Down</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>Down: <span class="tp">round</span></span></a>)
</span>}


<span class="comment">// Convert a decimal to a &#96;:double&#96;. This may lose precision.
</span><span class="decl-fun" id="double"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <span class="comment">// todo: handle decimals with many digits better
</span>  <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">!</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#neg_ques__1">neg?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>neg?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) {
    <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#pow">pow<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>pow: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<span class="number">10.0</span>,<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>)
  }
  <span class="kw">else</span> {
    <span class="kw">val</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a><a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a>,<a class="pp">r<span class="pc">r: <span class="tp">int</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a> <span class="kw">=</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#divmod_pow10">divmod-pow10<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>divmod<span class="dash">-</span>pow10: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span></span></a>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>)
    <a class="pp">q<span class="pc">q: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_plus__2">+<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(+)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp">r<span class="pc">r: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#pow">pow<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>pow: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<span class="number">10.0</span>,<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>)
  }
</span>}

<span class="comment">// Return the 'floored' fraction, always in the range [&#96;0&#96;,&#96;1.0&#96;] (can be &#96;1.0&#96; on precision loss):\
// &#96;x.floor.decimal + x.ffraction.decimal == x&#96; 
</span><span class="decl-fun" id="ffraction"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#ffraction">ffraction<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>ffraction: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">!</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#neg_ques__1">neg?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>neg?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <a class="pp"><span class="kw">return</span><span class="pc">return: <span class="tp">double</span></span></a> <span class="number">0.0</span>
  <span class="kw">val</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space__lp__comma__rp_"><span class="co">(</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a>&#95;,<a class="pp">r<span class="pc">r: <span class="tp">int</span></span></a><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space__lp__comma__rp_"><span class="co">)</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(,): <span class="tp kw">forall</span><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">b</span><span class="tp sp">&gt;</span> <span class="tp sp">(</span><span class="tp tpp">fst</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tpp">snd</span> <span class="tp kw op">:</span> <span class="tp tv">b</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">,</span> <span class="tp tv">b</span><span class="tp sp">)</span></span></a> <span class="kw">=</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#num">num<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>num: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#divmod_pow10">divmod-pow10<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>divmod<span class="dash">-</span>pow10: <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">,</span> <span class="tp tpp">n</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">,</span> <span class="tp">int</span><span class="tp sp">)</span></span></a>(<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_tilde_">~<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(~): <span class="tp sp">(</span><span class="tp tpp">i</span> <span class="tp kw op">:</span> <span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a>)
  <a class="pp">r<span class="pc">r: <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_star__1">&#42;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&#42;)<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#pow">pow<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>pow: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">,</span> <span class="tp tpp">p</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>(<span class="number">10.0</span>,<a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#exp">exp<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>exp: <span class="tp sp">(</span><span class="tp tpp">decimal</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">int</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#double">double<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp sp">(</span><span class="tp">int</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>)
  <span class="comment">//if (x.frac.zero? || x.prec.zero?) then 0.0 else x.frac.double &#42; pow10(~x.prec.double)
</span></span>}

<span class="comment">// Return the 'truncated' fraction, always in the range [&#96;-1.0&#96;,&#96;1.0&#96;] (can reach extremes on precision loss):\
// &#96;x.trunc.decimal + x.fraction.decimal == x&#96;
</span><span class="decl-fun" id="fraction"><span class="kw">public</span> <span class="kw">fun</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_num_decimal.html#fraction">fraction<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>fraction: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>( <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a> <span class="tp kw op">:</span> <a class="pp" href="#type_space_decimal"><span class="tp">decimal</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>decimal: <span class="tp">V</span></span></a> ) <span class="tp kw op">:</span> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> {
  <span class="kw">val</span> <a class="pp">f<span class="pc">f: <span class="tp">double</span></span></a> <span class="kw">=</span> <a class="pp">x<span class="pc">x: <span class="tp">decimal</span></span></a><span class="kw op">.</span><a class="pp" href="#ffraction">ffraction<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>ffraction: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a>
  <span class="kw">if</span> (<a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#con_space_True"><span class="co">x</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>True: <span class="tp">bool</span></span></a><span class="kw op">.</span><a class="pp" href="#neg_ques_">neg?<span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>decimal<span class="fslash last">/</span></span>neg?: <span class="tp sp">(</span><span class="tp tpp">x</span> <span class="tp kw op">:</span> <span class="tp">decimal</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_amp__amp_">&amp;&amp;<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(&amp;&amp;): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">,</span> <span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_excl_">!<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(!): <span class="tp sp">(</span><span class="tp">bool</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a><a class="pp">f<span class="pc">f: <span class="tp">double</span></span></a><span class="kw op">.</span><a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#zero_ques__1">zero?<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>zero?<span class="postfix">.1</span>: <span class="tp sp">(</span><span class="tp tpp">d</span> <span class="tp kw op">:</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">bool</span></span></a>) <span class="kw">then</span> <a class="pp">f<span class="pc">f: <span class="tp">double</span></span></a> <a class="pp" href="https://koka-lang.github.io/koka/doc/std_core-source.html#_dash__2">-<span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(<span class="dash">-</span>)<span class="postfix">.2</span>: <span class="tp sp">(</span><span class="tp">double</span><span class="tp sp">,</span> <span class="tp">double</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp">double</span></span></a> <span class="number">1.0</span> <span class="kw">else</span> <a class="pp">f<span class="pc">f: <span class="tp">double</span></span></a>
</span>}
</pre>

</div></body>
</html>
