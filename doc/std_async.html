
<!DOCTYPE html>
<html>
<!-- NO_CLICK_TRACKING -->

<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />

<style type="text/css">.koka .plaincode, .koka a.pp .pc { display: none; } .koka a.pp { color: inherit; text-decoration: none; }</style>
<link rel="stylesheet" type="text/css" href="styles/madoko.css" />
<link rel="stylesheet" type="text/css" href="styles/koka.css" />

<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Noto+Serif:400,400italic,700,700italic" />
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700,400italic" />

<title>std/async documentation</title>
</head>

<body class="koka doc body"><div class="madoko">
<h1><a class="link" href="std_async-source.html"><span class="mo">std<span class="fslash">/</span>async</span></a><a class="link" href="toc.html"><span class="toc-link">&#x25b2;toc</span></a></h1>
<div class="toc code"><ul class="toc"><li><a class="link" href="#type_space_asyncx"><span class="kw">alias</span>&nbsp;<span class="tp">asyncx</span></a>
</li><li><a class="link" href="#type_space_exception_info"><span class="kw">type</span>&nbsp;<span class="tp">exception<span class="dash">-</span>info</span></a>
</li><li class="nested"><a class="link" href="#con_space_Cancel"><span class="kw">con</span>&nbsp;<span class="co">Cancel</span></a></li><li class="nested"><a class="link" href="#cancel_ques_"><span class="kw">fun</span>&nbsp;cancel?</a></li><li>&nbsp;</li><li><a class="link" href="#async_all"><span class="kw">fun</span>&nbsp;async<span class="dash">-</span>all</a></li><li><a class="link" href="#async_fork"><span class="kw">fun</span>&nbsp;async<span class="dash">-</span>fork</a></li><li><a class="link" href="#cancelable"><span class="kw">fun</span>&nbsp;cancelable</a></li><li><a class="link" href="#cancelable_wait"><span class="kw">fun</span>&nbsp;cancelable<span class="dash">-</span>wait</a></li></ul><ul class="toc"><li><a class="link" href="#on_cancel"><span class="kw">fun</span>&nbsp;on<span class="dash">-</span>cancel</a></li><li><a class="link" href="#synchronous"><span class="kw">fun</span>&nbsp;synchronous</a></li><li><a class="link" href="#timeout"><span class="kw">fun</span>&nbsp;timeout</a></li><li><a class="link" href="#unsafe_async_yield"><span class="kw">fun</span>&nbsp;unsafe<span class="dash">-</span>async<span class="dash">-</span>yield</a></li><li><a class="link" href="#unsafe_async_yield_err"><span class="kw">fun</span>&nbsp;unsafe<span class="dash">-</span>async<span class="dash">-</span>yield<span class="dash">-</span>err</a></li><li><a class="link" href="#wait"><span class="kw">fun</span>&nbsp;wait</a></li><li><a class="link" href="#wait_1"><span class="kw">fun</span>&nbsp;wait</a></li></ul></div>
<div class="doc koka comment">

<p class="p noindent">   Asynchronous primitives.
</p></div>
<div class="decl" id="type_space_asyncx"><div class="header code"><span class="def"><span class="kw">alias</span>&nbsp;<span class="tp"><a class="pp" href="std_async-source.html#type_space_asyncx"><span class="tp">asyncx</span><span class="pc"><span class="mo">std<span class="fslash">/</span>async<span class="fslash last">/</span></span>asyncx: <span class="tp">E</span></span></a></span></span><span class="tp"></span>&nbsp;<span class="kw">=</span>&nbsp;<span class="tp sp">&lt;</span><a class="pp" href="std_core.html#type_space_async"><span class="tp">async</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>async: <span class="tp">HX</span></span></a><span class="tp sp">,</span><a class="pp" href="std_core.html#type_space_exn"><span class="tp">exn</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="tp">X</span></span></a><span class="tp sp">,</span><a class="pp" href="std_core.html#type_space_ndet"><span class="tp">ndet</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>ndet: <span class="tp">X</span></span></a><span class="tp sp">&gt;</span></div><div class="doc koka comment">

<p class="p noindent">   A type alias for asynchronous operations that can raise exceptions non-deterministically.
   This is common for almost all <code class="koka"><a class="pp" href="std_core.html#type_space_async"><span class="tp">async</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>async: <span class="tp">HX</span></span></a></code> operations since <code class="koka"><a class="pp" href="#cancelable">cancelable<span class="pc"><span class="mo">std<span class="fslash">/</span>async<span class="fslash last">/</span></span>cancelable: <span class="tp kw">forall</span><span class="tp sp">&#60;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&#62;</span> <span class="tp sp">(</span><span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tpp">cancel</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-&gt;</span> <span class="tp">exn</span> <span class="tp sp">(</span><span class="tp sp">)</span><span class="tp sp">)</span> <span class="tp kw op">-&gt;</span> <span class="tp sp">&#60;</span><span class="tp">asyncx</span><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&#62;</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-&gt;</span> <span class="tp sp">&#60;</span><span class="tp">asyncx</span><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&#62;</span> <span class="tp">maybe</span><span class="tp sp">&#60;</span><span class="tp tv">a</span><span class="tp sp">&#62;</span></span></a></code> and <code class="koka"><a class="pp" href="#timeout">timeout<span class="pc"><span class="mo">std<span class="fslash">/</span>async<span class="fslash last">/</span></span>timeout: <span class="tp kw">forall</span><span class="tp sp">&#60;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&#62;</span> <span class="tp sp">(</span><span class="tp tpp">secs</span> <span class="tp kw op">:</span> <span class="tp">duration</span><span class="tp sp">,</span> <span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-&gt;</span> <span class="tp sp">&#60;</span><span class="tp">asyncx</span><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&#62;</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-&gt;</span> <span class="tp sp">&#60;</span><span class="tp">asyncx</span><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&#62;</span> <span class="tp">maybe</span><span class="tp sp">&#60;</span><span class="tp tv">a</span><span class="tp sp">&#62;</span></span></a></code> can
   cancel operations non-deterministically which raises the <code class="koka"><a class="pp" href="#con_space_Cancel"><span class="co">Cancel</span><span class="pc"><span class="mo">std<span class="fslash">/</span>async<span class="fslash last">/</span></span>Cancel: <span class="tp">exception<span class="dash">-</span>info</span></span></a></code> exception and cancels
   outstanding asynchronous requests. 
</p></div></div>
<div class="decl" id="type_space_exception_info"><div class="header code"><span class="def"><span class="kw">type&nbsp;extend</span>&nbsp;<span class="tp"><a class="pp" href="std_core.html#type_space_exception_info"><span class="tp">exception<span class="dash">-</span>info</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exception<span class="dash">-</span>info: <span class="tp">V</span></span></a></span></span><span class="tp"></span></div><div class="doc koka comment">

<p class="p noindent">   The <code class="koka"><a class="pp" href="#con_space_Cancel"><span class="co">Cancel</span><span class="pc"><span class="mo">std<span class="fslash">/</span>async<span class="fslash last">/</span></span>Cancel: <span class="tp">exception<span class="dash">-</span>info</span></span></a></code> exception.
</p></div><div class="con-decl" id="con_space_Cancel"><div class="header code"><span class="def"><span class="kw">con</span>&nbsp;<a class="link" href="std_async-source.html#con_space_Cancel"><span class="co">Cancel</span></a></span></div><div class="doc koka comment">

<p class="p noindent">   The <code class="koka"><a class="pp" href="#con_space_Cancel"><span class="co">Cancel</span><span class="pc"><span class="mo">std<span class="fslash">/</span>async<span class="fslash last">/</span></span>Cancel: <span class="tp">exception<span class="dash">-</span>info</span></span></a></code> exception is thrown when an asynchronous operation is canceled.
</p></div></div><div class="nested"><div class="decl" id="cancel_ques_"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_async-source.html#cancel_ques_">cancel?</a></span>( <span class="tp tpp">exception<span class="dash">-</span>info</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="std_core.html#type_space_exception_info"><span class="tp">exception<span class="dash">-</span>info</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exception<span class="dash">-</span>info: <span class="tp">V</span></span></a> ) <span class="tp sp">:</span>&nbsp;<a class="pp" href="std_core.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a></div><div class="doc koka comment">

<p class="p noindent">   Automatically generated. Tests for the <code class="koka"><a class="pp" href="#con_space_Cancel"><span class="co">Cancel</span><span class="pc"><span class="mo">std<span class="fslash">/</span>async<span class="fslash last">/</span></span>Cancel: <span class="tp">exception<span class="dash">-</span>info</span></span></a></code> constructor of the <code class="koka"><a class="pp" href="std_core.html#type_space_exception_info"><span class="tp">exception<span class="dash">-</span>info</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exception<span class="dash">-</span>info: <span class="tp">V</span></span></a></code> type.
</p></div></div></div></div>
<div class="decl" id="async_all"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_async-source.html#async_all">async<span class="dash">-</span>all</a></span>( <span class="tp tpp">actions</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="std_core.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="std_core.html#type_space_async"><span class="tp">async</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>async: <span class="tp">HX</span></span></a><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span><span class="tp sp">&gt;</span> ) <span class="tp sp">:</span>&nbsp;<span class="tp sp">&lt;</span><a class="pp" href="std_core.html#type_space_async"><span class="tp">async</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>async: <span class="tp">HX</span></span></a><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <a class="pp" href="std_core.html#type_space_list"><span class="tp">list</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>list: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></div><div class="doc koka comment">

<p class="p noindent">   Execute <code class="koka">actions</code> asynchronously, i.e. interleaved around asynchronous operations.
   When all operations have terminated (or raised an exception) return the list of
   results (or raise the first raised exception).
</p></div></div>
<div class="decl" id="async_fork"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_async-source.html#async_fork">async<span class="dash">-</span>fork</a></span>( <span class="tp tpp">action1</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="std_core.html#type_space_async"><span class="tp">async</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>async: <span class="tp">HX</span></span></a><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span>, <span class="tp tpp">action2</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="std_core.html#type_space_async"><span class="tp">async</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>async: <span class="tp">HX</span></span></a><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <a class="pp" href="std_core.html#type_space__lp__rp_"><span class="tp">()</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a> ) <span class="tp sp">:</span>&nbsp;<span class="tp sp">&lt;</span><a class="pp" href="std_core.html#type_space_async"><span class="tp">async</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>async: <span class="tp">HX</span></span></a><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span></div></div>
<div class="decl" id="cancelable"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_async-source.html#cancelable">cancelable</a></span>( <span class="tp tpp">action</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp tpp">cancel</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <a class="pp" href="std_core.html#type_space_exn"><span class="tp">exn</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="tp">X</span></span></a> <a class="pp" href="std_core.html#type_space__lp__rp_"><span class="tp">()</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_asyncx"><span class="tp">asyncx</span><span class="pc"><span class="mo">std<span class="fslash">/</span>async<span class="fslash last">/</span></span>asyncx: <span class="tp">E</span></span></a><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span> ) <span class="tp sp">:</span>&nbsp;<span class="tp sp">&lt;</span><a class="pp" href="#type_space_asyncx"><span class="tp">asyncx</span><span class="pc"><span class="mo">std<span class="fslash">/</span>async<span class="fslash last">/</span></span>asyncx: <span class="tp">E</span></span></a><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <a class="pp" href="std_core.html#type_space_maybe"><span class="tp">maybe</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>maybe: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></div><div class="doc koka comment">

<p class="p noindent">   Execute an asynchronous <code class="koka">action</code> that gets passed as <code class="koka">cancel</code> function. If <code class="koka">cancel</code> is
   called, it will either raise the <code class="koka"><a class="pp" href="#con_space_Cancel"><span class="co">Cancel</span><span class="pc"><span class="mo">std<span class="fslash">/</span>async<span class="fslash last">/</span></span>Cancel: <span class="tp">exception<span class="dash">-</span>info</span></span></a></code> exception on the next asynchronous operation,
   or, if currently in an asynchronous operation, it will cancel the outstanding operation
   and resume by throwing <code class="koka"><a class="pp" href="#con_space_Cancel"><span class="co">Cancel</span><span class="pc"><span class="mo">std<span class="fslash">/</span>async<span class="fslash last">/</span></span>Cancel: <span class="tp">exception<span class="dash">-</span>info</span></span></a></code> at that point. If canceled, <code class="koka"><a class="pp" href="#cancelable">cancelable<span class="pc"><span class="mo">std<span class="fslash">/</span>async<span class="fslash last">/</span></span>cancelable: <span class="tp kw">forall</span><span class="tp sp">&#60;</span><span class="tp tv">a</span><span class="tp sp">,</span><span class="tp tv">e</span><span class="tp sp">&#62;</span> <span class="tp sp">(</span><span class="tp tpp">action</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tpp">cancel</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-&gt;</span> <span class="tp">exn</span> <span class="tp sp">(</span><span class="tp sp">)</span><span class="tp sp">)</span> <span class="tp kw op">-&gt;</span> <span class="tp sp">&#60;</span><span class="tp">asyncx</span><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&#62;</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-&gt;</span> <span class="tp sp">&#60;</span><span class="tp">asyncx</span><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&#62;</span> <span class="tp">maybe</span><span class="tp sp">&#60;</span><span class="tp tv">a</span><span class="tp sp">&#62;</span></span></a></code> returns <code class="koka"><a class="pp" href="std_core.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&#60;</span><span class="tp tv">a</span><span class="tp sp">&#62;</span> <span class="tp">maybe</span><span class="tp sp">&#60;</span><span class="tp tv">a</span><span class="tp sp">&#62;</span></span></a></code>,
   and on success <code class="koka"><a class="pp" href="std_core.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&#60;</span><span class="tp tv">a</span><span class="tp sp">&#62;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-&gt;</span> <span class="tp">maybe</span><span class="tp sp">&#60;</span><span class="tp tv">a</span><span class="tp sp">&#62;</span></span></a>(x)</code> where <code class="koka">x</code> is the result of <code class="koka">action</code>.
</p></div></div>
<div class="decl" id="cancelable_wait"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_async-source.html#cancelable_wait">cancelable<span class="dash">-</span>wait</a></span>( <span class="tp tpp">secs</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="std_time_duration.html#type_space_duration"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration: <span class="tp">V</span></span></a> ) <span class="tp sp">:</span>&nbsp;<span class="tp sp">&lt;</span><a class="pp" href="std_core.html#type_space_exn"><span class="tp">exn</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="tp">X</span></span></a><span class="tp sp">,</span><a class="pp" href="std_core.html#type_space_async"><span class="tp">async</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>async: <span class="tp">HX</span></span></a><span class="tp sp">,</span><a class="pp" href="std_core.html#type_space_ndet"><span class="tp">ndet</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>ndet: <span class="tp">X</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="std_core.html#type_space__lp__rp_"><span class="tp">()</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a></div><div class="doc koka comment">

<p class="p noindent">   Wait for <code class="koka">secs</code> seconds duration.
</p></div></div>
<div class="decl" id="on_cancel"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_async-source.html#on_cancel">on<span class="dash">-</span>cancel</a></span>( <span class="tp tpp">oncancel</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="std_core.html#type_space_exn"><span class="tp">exn</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="tp">X</span></span></a><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <a class="pp" href="std_core.html#type_space__lp__rp_"><span class="tp">()</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a>, <span class="tp tpp">action</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="std_core.html#type_space_exn"><span class="tp">exn</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="tp">X</span></span></a><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span> ) <span class="tp sp">:</span>&nbsp;<span class="tp sp">&lt;</span><a class="pp" href="std_core.html#type_space_exn"><span class="tp">exn</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="tp">X</span></span></a><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span></div></div>
<div class="decl" id="synchronous"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_async-source.html#synchronous">synchronous</a></span>( <span class="tp tpp">action</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="std_core.html#type_space_async"><span class="tp">async</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>async: <span class="tp">HX</span></span></a><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span> ) <span class="tp sp">:</span>&nbsp;<span class="tp tv">e</span> <span class="tp tv">a</span></div><div class="doc koka comment">

<p class="p noindent">   Execute any asynchronous actions inside <code class="koka">action</code> synchronously, ie. 
   no other actions are interleaved.
</p></div></div>
<div class="decl" id="timeout"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_async-source.html#timeout">timeout</a></span>( <span class="tp tpp">secs</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="std_time_duration.html#type_space_duration"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration: <span class="tp">V</span></span></a>, <span class="tp tpp">action</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_asyncx"><span class="tp">asyncx</span><span class="pc"><span class="mo">std<span class="fslash">/</span>async<span class="fslash last">/</span></span>asyncx: <span class="tp">E</span></span></a><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span> ) <span class="tp sp">:</span>&nbsp;<span class="tp sp">&lt;</span><a class="pp" href="#type_space_asyncx"><span class="tp">asyncx</span><span class="pc"><span class="mo">std<span class="fslash">/</span>async<span class="fslash last">/</span></span>asyncx: <span class="tp">E</span></span></a><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <a class="pp" href="std_core.html#type_space_maybe"><span class="tp">maybe</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>maybe: <span class="tp">V</span> <span class="tp kw op">-></span> <span class="tp">V</span></span></a><span class="tp sp">&lt;</span><span class="tp tv">a</span><span class="tp sp">&gt;</span></div><div class="doc koka comment">

<p class="p noindent">   Do <code class="koka">action</code> but cancel it if it is not done within <code class="koka">secs</code> seconds. 
   Returns <code class="koka"><a class="pp" href="std_core.html#con_space_Nothing"><span class="co">Nothing</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Nothing: <span class="tp kw">forall</span><span class="tp sp">&#60;</span><span class="tp tv">a</span><span class="tp sp">&#62;</span> <span class="tp">maybe</span><span class="tp sp">&#60;</span><span class="tp tv">a</span><span class="tp sp">&#62;</span></span></a></code> if canceled, and <code class="koka"><a class="pp" href="std_core.html#con_space_Just"><span class="co">Just</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>Just: <span class="tp kw">forall</span><span class="tp sp">&#60;</span><span class="tp tv">a</span><span class="tp sp">&#62;</span> <span class="tp sp">(</span><span class="tp tpp">value</span> <span class="tp kw op">:</span> <span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-&gt;</span> <span class="tp">maybe</span><span class="tp sp">&#60;</span><span class="tp tv">a</span><span class="tp sp">&#62;</span></span></a>(x)</code> if successful with a result <code class="koka">x</code>.
</p></div></div>
<div class="decl" id="unsafe_async_yield"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_async-source.html#unsafe_async_yield">unsafe<span class="dash">-</span>async<span class="dash">-</span>yield</a></span>( <span class="tp tpp">action</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp tpp">cb</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_asyncx"><span class="tp">asyncx</span><span class="pc"><span class="mo">std<span class="fslash">/</span>async<span class="fslash last">/</span></span>asyncx: <span class="tp">E</span></span></a><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <a class="pp" href="std_core.html#type_space__lp__rp_"><span class="tp">()</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_asyncx"><span class="tp">asyncx</span><span class="pc"><span class="mo">std<span class="fslash">/</span>async<span class="fslash last">/</span></span>asyncx: <span class="tp">E</span></span></a><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <a class="pp" href="std_core.html#type_space__lp__rp_"><span class="tp">()</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a>, <span class="tp tpp">haserr</span> <span class="tp sp">:</span>&nbsp;<span class="tp op">?</span><a class="pp" href="std_core.html#type_space_bool"><span class="tp">bool</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>bool: <span class="tp">V</span></span></a> ) <span class="tp sp">:</span>&nbsp;<span class="tp sp">&lt;</span><a class="pp" href="#type_space_asyncx"><span class="tp">asyncx</span><span class="pc"><span class="mo">std<span class="fslash">/</span>async<span class="fslash last">/</span></span>asyncx: <span class="tp">E</span></span></a><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span></div></div>
<div class="decl" id="unsafe_async_yield_err"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_async-source.html#unsafe_async_yield_err">unsafe<span class="dash">-</span>async<span class="dash">-</span>yield<span class="dash">-</span>err</a></span>( <span class="tp tpp">action</span> <span class="tp sp">:</span>&nbsp;<span class="tp sp">(</span><span class="tp tpp">cb</span> <span class="tp kw op">:</span> <span class="tp sp">(</span><span class="tp tv">a</span><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_asyncx"><span class="tp">asyncx</span><span class="pc"><span class="mo">std<span class="fslash">/</span>async<span class="fslash last">/</span></span>asyncx: <span class="tp">E</span></span></a><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <a class="pp" href="std_core.html#type_space__lp__rp_"><span class="tp">()</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a><span class="tp sp">)</span> <span class="tp kw op">-></span> <span class="tp sp">&lt;</span><a class="pp" href="#type_space_asyncx"><span class="tp">asyncx</span><span class="pc"><span class="mo">std<span class="fslash">/</span>async<span class="fslash last">/</span></span>asyncx: <span class="tp">E</span></span></a><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <a class="pp" href="std_core.html#type_space__lp__rp_"><span class="tp">()</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a> ) <span class="tp sp">:</span>&nbsp;<span class="tp sp">&lt;</span><a class="pp" href="#type_space_asyncx"><span class="tp">asyncx</span><span class="pc"><span class="mo">std<span class="fslash">/</span>async<span class="fslash last">/</span></span>asyncx: <span class="tp">E</span></span></a><span class="tp sp">|</span><span class="tp tv">e</span><span class="tp sp">&gt;</span> <span class="tp tv">a</span></div></div>
<div class="decl" id="wait"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_async-source.html#wait">wait</a></span>( <span class="tp tpp">secs</span> <span class="tp sp">:</span>&nbsp;<a class="pp" href="std_core.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a> ) <span class="tp sp">:</span>&nbsp;<span class="tp sp">&lt;</span><a class="pp" href="std_core.html#type_space_exn"><span class="tp">exn</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="tp">X</span></span></a><span class="tp sp">,</span><a class="pp" href="std_core.html#type_space_async"><span class="tp">async</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>async: <span class="tp">HX</span></span></a><span class="tp sp">,</span><a class="pp" href="std_core.html#type_space_ndet"><span class="tp">ndet</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>ndet: <span class="tp">X</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="std_core.html#type_space__lp__rp_"><span class="tp">()</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a></div><div class="doc koka comment">

<p class="p noindent">   Wait (asynchronously) for <code class="koka">secs</code> seconds as a <code class="koka"><a class="pp" href="std_core.html#type_space_double"><span class="tp">double</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>double: <span class="tp">V</span></span></a></code>. 
   Use <code class="koka">wait()</code> to yield to other asynchronous operations.
</p></div></div>
<div class="decl" id="wait_1"><div class="header code"><span class="def"><span class="kw">fun</span>&nbsp;<a class="link" href="std_async-source.html#wait_1">wait</a></span>( <span class="tp tpp">secs</span> <span class="tp sp">:</span>&nbsp;<span class="tp op">?</span><a class="pp" href="std_time_duration.html#type_space_duration"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration: <span class="tp">V</span></span></a> ) <span class="tp sp">:</span>&nbsp;<span class="tp sp">&lt;</span><a class="pp" href="std_core.html#type_space_exn"><span class="tp">exn</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>exn: <span class="tp">X</span></span></a><span class="tp sp">,</span><a class="pp" href="std_core.html#type_space_async"><span class="tp">async</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>async: <span class="tp">HX</span></span></a><span class="tp sp">,</span><a class="pp" href="std_core.html#type_space_ndet"><span class="tp">ndet</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>ndet: <span class="tp">X</span></span></a><span class="tp sp">&gt;</span> <a class="pp" href="std_core.html#type_space__lp__rp_"><span class="tp">()</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core<span class="fslash last">/</span></span>(): <span class="tp">V</span></span></a></div><div class="doc koka comment">

<p class="p noindent">   Wait (asynchronously) for optional <code class="koka">secs</code> seconds <code class="koka"><a class="pp" href="std_time_duration.html#type_space_duration"><span class="tp">duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration<span class="fslash last">/</span></span>duration: <span class="tp">V</span></span></a></code> (<code class="koka"><span class="kw">=</span> <span class="number">0</span>s</code>). 
   Use <code class="koka">wait()</code> to yield generally to other asynchronous operations.
   If the wait time is longer than 200ms the wait can be canceled.
</p></div></div>
<div class="decl" id="-private-imports"><div class="header code"><span class="def"><span class="kw">private import</span>&nbsp;<span class="code"><a class="pp" href="std_core.html"><span class="mo">std<span class="fslash">/</span>core</span><span class="pc"><span class="mo">std<span class="fslash">/</span>core</span></span></a></span>, <span class="code"><a class="pp" href="std_num_int32.html"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>int32</span><span class="pc"><span class="mo">std<span class="fslash">/</span>num<span class="fslash">/</span>int32</span></span></a></span>, <span class="code"><a class="pp" href="std_time_duration.html"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration</span><span class="pc"><span class="mo">std<span class="fslash">/</span>time<span class="fslash">/</span>duration</span></span></a></span></span></div></div>
</div></body>
</html>

<span data-line=""></span>